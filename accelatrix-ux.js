/* Accelatrix UX v1.0.0 */
/* Copyright (c) 2025 Miguel@Ferreira-family.org */
/* License agreement: https://github.com/accelatrix/accelatrix-ux/blob/main/LICENSE.md */
/* Latest version availabe at: */
/* •	https://ferreira-family.org/accelatrix/accelatrix-ux.min.js */
/* •	https://www.npmjs.com/package/accelatrix-ux */
/* •	https://github.com/accelatrix/accelatrix-ux */
/* •	https://www.nuget.org/packages/Accelatrix-UX */
var Accelatrix,__assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};(()=>{var eventListeners;function Find(selector){for(var results=document.querySelectorAll(selector),result=new Array,i=0;i<results.length;i++)result.push(results.item(i));return result}function SubscribeToEvent(element,eventType,eventName,listener,placeFirst){null!=listener&&(listener=listener.bind(this),element.addEventListener(eventType,listener,1==placeFirst),eventListeners.push({Element:element,Type:eventType,Name:eventName,Handler:listener}))}function UnsubscribeToEvent(element,eventType,eventName,propagate){var entries=eventListeners.Where(function(z){return(z.Type==eventType||String.IsNullOrWhiteSpace(eventType))&&(z.Name==eventName||String.IsNullOrWhiteSpace(eventName))}).Where(function(z){return!0===propagate||z.Element==element}).Select(function(z){return __assign(__assign({},z),{IsCandidate:z.Element!=element})}).ToList();eventListeners=eventListeners.Where(function(z){return!(z.Element==element&&(z.Type==eventType||String.IsNullOrWhiteSpace(eventType))&&(z.Name==eventName||String.IsNullOrWhiteSpace(eventName)))}).ToList(),entries.ForEach(function(z){return z.Element.removeEventListener(z.Type,z.Handler)}),propagate&&entries.Where(function(z){return z.IsCandidate&&z.Element.Parents().Where(function(w){return w==element}).Any()}).ForEach(function(z){return UnsubscribeToEvent(z.Element,z.Type,z.Name,!1)})}eventListeners=[],HTMLElement.prototype.ListenToEvent=function(event,name,placeFirst,handler){var placeAhead;return null!=this&&(placeAhead=!0===placeFirst,SubscribeToEvent(this,event,null==name||name instanceof Function?null:name.toString(),name instanceof Function?name:placeFirst instanceof Function?placeFirst:handler,placeAhead)),this},HTMLElement.prototype.StopEventListening=function(event,name,propagateToChildren){return null!=this&&UnsubscribeToEvent(this,!0===event||!1===event?null:event,!0===name||!1===name||null==name?null:name.toString(),!0===event||!0===name||!0===propagateToChildren),this},Object.defineProperty(HTMLElement,"Find",{value:Find,enumerable:!1,configurable:!0}),Object.defineProperty(HTMLElement,"Create",{value:function(tag){return document.createElement(tag)},enumerable:!1,configurable:!0}),Object.defineProperty(HTMLDocument.prototype,"Find",{value:Find,enumerable:!1,configurable:!0}),Object.defineProperty(HTMLDocument.prototype,"Create",{value:function(tag){return document.createElement(tag)},enumerable:!1,configurable:!0}),Object.defineProperty(HTMLDocument.prototype,"ListenToEvent",{value:function(event,name,placeFirst,handler){var placeAhead;return null!=this&&(placeAhead=!0===placeFirst,SubscribeToEvent(this,event,null==name||name instanceof Function?null:name.toString(),name instanceof Function?name:placeFirst instanceof Function?placeFirst:handler,placeAhead)),this},enumerable:!1,configurable:!0}),Object.defineProperty(HTMLDocument.prototype,"StopEventListening",{value:function(event,name,propagateToChildren){return null!=this&&UnsubscribeToEvent(this,!0===event||!1===event?null:event,!0===name||!1===name?null:name.toString(),!0===event||!0===name||!0===propagateToChildren),this},enumerable:!1,configurable:!0}),Object.defineProperty(Window.prototype,"ListenToEvent",{value:function(event,name,placeFirst,handler){var placeAhead;return null!=this&&(placeAhead=!0===placeFirst,SubscribeToEvent(this,event,null==name||name instanceof Function?null:name.toString(),name instanceof Function?name:placeFirst instanceof Function?placeFirst:handler,placeAhead)),this},enumerable:!1,configurable:!0}),Object.defineProperty(Window.prototype,"StopEventListening",{value:function(event,name,propagateToChildren){return null!=this&&UnsubscribeToEvent(this,!0===event||!1===event?null:event,!0===name||!1===name?null:name.toString(),!0===event||!0===name||!0===propagateToChildren),this},enumerable:!1,configurable:!0}),HTMLElement.prototype.AddClass=function(className){return null==this||null==className||0==className.trim().length||this.className.split(" ").Where(function(z){return z==className.trim()}).Any()||(this.className=this.className.trim()+" "+className),this},HTMLElement.prototype.RemoveClass=function(className){return null==this||null==className||0==className.trim().length||this.className.indexOf(className)<0||(this.className=this.className.split(" ").Where(function(z){return z!=className.trim()}).ToList().join(" ")),this},HTMLElement.prototype.HasClass=function(className){return null!=this&&null!=className&&0!=className.trim().length&&this.className.split(" ").Where(function(z){return z.trim()==className.trim()}).Any()},HTMLElement.prototype.Find=function(selector){if(null==this||null==selector||0==selector.trim().length)return this;var notNested=0==selector.indexOf(">");notNested&&(selector=selector.substring(1).trim());try{for(var results=this.querySelectorAll(selector),result=new Array,i=0;i<results.length;i++){var ele=results.item(i);0<=ele.GetType().Name.toLowerCase().indexOf("svg")||notNested&&ele.ParentElement()!=this||result.push(ele)}return result}catch(e){return[]}},HTMLElement.prototype.TextNodes=function(){var addTextNodes,textNodes=[];try{for(var nodeIterator,node=(nodeIterator=document.createNodeIterator(this,NodeFilter.SHOW_TEXT,function(z){return NodeFilter.FILTER_ACCEPT})).nextNode();null!=node;)textNodes.push(node),node=nodeIterator.nextNode()}catch(e){}return null==nodeIterator&&((addTextNodes=function(el){textNodes=textNodes.concat([].filter.call(el.childNodes,function(k){return k.nodeType==Node.TEXT_NODE}))})(this),[].forEach.call(this.querySelectorAll("*"),addTextNodes)),textNodes.Where(function(z){return null!=z.textContent&&0<z.textContent.trim().length&&null!=z.ParentElement()&&null!=z.ParentElement().tagName&&null!=z.ParentElement().Parents}).Where(function(z){return![z.ParentElement()].Concat(z.ParentElement().Parents()).Where(function(w){return null!=w&&null!=w.tagName}).Where(function(w){return"SCRIPT"==w.tagName.toUpperCase()||"STYLE"==w.tagName.toUpperCase()}).Any()}).ToList()},Node.prototype.ParentElement=function(){return null!=this.parentElement?this.parentElement:this.FlattenHierarchy(function(z){return null==z?null:[z.parentNode]}).Where(function(z){return z.nodeType===Node.ELEMENT_NODE}).FirstOrNull()},HTMLElement.prototype.WrapText=function(tag){return this.TextNodes().Select(function(z){return{Text:z,ParentTag:null==z.parentNode?"":z.parentNode.tagName.toUpperCase()}}).Where(function(z){return"TEXTAREA"!=z.ParentTag}).ForEach(function(z){var element=document.Create(tag);0!=z.Text.parentNode.outerHTML.indexOf(element.outerHTML.substring(0,element.outerHTML.indexOf(">")))&&(element.innerText=z.Text.textContent.replace("\r","").replace("\n",""),element.InsertAfter(z.Text),null==z.Text.remove?z.Text.parentNode.removeChild(z.Text):z.Text.remove())}),this},HTMLElement.prototype.Parents=function(){for(var parents=[],p=this.parentElement;null!=p&&p!=document.body;){var o=p;parents.push(o),p=o.parentElement}return null==p||"BODY"!=p.tagName||parents.Where(function(z){return"BODY"==z.tagName}).Any()||parents.push(p),parents},HTMLElement.prototype.Closest=function(selector){if(null==this)return null;var parents=this.Parents(),root=parents.LastOrNull();if(null==root)return null;var selection=root.Find(selector);null!=root.matches?root.matches(selector)&&selection.push(root):null!=root.webkitMatchesSelector?root.webkitMatchesSelector(selector)&&selection.push(root):null!=root.mozMatchesSelector?root.mozMatchesSelector(selector)&&selection.push(root):null!=root.msMatchesSelector?root.msMatchesSelector(selector)&&selection.push(root):null!=root.oMatchesSelector&&root.oMatchesSelector(selector)&&selection.push(root);for(var i=0;i<parents.length;i++)for(var j=0;j<selection.length;j++)if(parents[i].isEqualNode(selection[j]))return parents[i]},HTMLElement.prototype.Attr=function(name,value){return null!=this&&null!=name&&0!=name.trim().length&&(null==value?this.removeAttribute(name):this.setAttribute(name,value)),this},HTMLElement.prototype.RemoveAttr=function(name){return null!=this&&null!=name&&0!=name.trim().length&&this.removeAttribute(name),this},HTMLElement.prototype.Css=function(key,value){return this.style[key]=value,this},HTMLElement.prototype.Append=function(childElement){return null!=this&&null!=childElement&&this.appendChild(childElement),this},HTMLElement.prototype.Prepend=function(childElement){return null!=this&&null!=childElement&&this.insertBefore(childElement,this.childNodes[0]),this},HTMLElement.prototype.AppendTo=function(parentElement){return null!=this&&null!=parentElement&&parentElement.Append(this),this},HTMLElement.prototype.PrependTo=function(parentElement){return null!=this&&null!=parentElement&&parentElement.Prepend(this),this},HTMLElement.prototype.InsertAfter=function(siblingElement){return null==this||null==siblingElement||null==siblingElement.ParentElement()&&null==siblingElement.parentNode||(null!=siblingElement.ParentElement()?siblingElement.ParentElement():siblingElement.parentNode).insertBefore(this,siblingElement.nextSibling),this},HTMLElement.prototype.InsertBefore=function(siblingElement){return null==this||null==siblingElement||null==siblingElement.ParentElement()&&null==siblingElement.parentNode||(null!=siblingElement.ParentElement()?siblingElement.ParentElement():siblingElement.parentNode).insertBefore(this,siblingElement),this},HTMLElement.prototype.ReplaceWith=function(replacement){return null==this?this:"String"==replacement.GetType().Name?(this.outerHTML=replacement,this):(replacement.InsertAfter(this),null==this.remove?this.ParentElement().removeChild(this):this.remove(),replacement)},HTMLElement.prototype.Text=function(newText){return null!=this&&void 0!==newText&&(this.innerText=newText),this},HTMLElement.prototype.Html=function(newHtml){return null!=this&&null!=newHtml&&(this.innerHTML=newHtml),this},HTMLElement.prototype.Empty=function(){return null!=this&&(this.innerHTML=""),this},HTMLElement.prototype.GetAttributeNames=function(){if(null==this)return this;try{for(var attributes=this.attributes,result=new Array,i=0;i<attributes.length;i++){var ele=attributes.item(i).name;result.push(ele)}return result}catch(e){return[]}},HTMLElement.prototype.OuterWidth=function(includeMargin){var marginLeft,marginRight,borderLeft,style,width;return null==this?0:(style=window.getComputedStyle(this),marginLeft=parseFloat(style.marginLeft),marginRight=parseFloat(style.marginRight),borderLeft=parseFloat(style.borderLeftWidth),style=parseFloat(style.borderRightWidth),width=this.offsetWidth,"NaNpx"==(includeMargin=!0===includeMargin?width+borderLeft+style+marginLeft+marginRight:width+borderLeft+style).toString()?width:includeMargin)},HTMLElement.prototype.OuterHeight=function(includeMargin){var marginTop,marginBottom,borderTop,style,height;return null==this?0:(style=window.getComputedStyle(this),marginTop=parseFloat(style.marginTop),marginBottom=parseFloat(style.marginBottom),borderTop=parseFloat(style.borderTopWidth),style=parseFloat(style.borderBottomWidth),height=this.offsetHeight,"NaNpx"==(includeMargin=!0===includeMargin?height+borderTop+style+marginTop+marginBottom:height+borderTop+style).toString()?height:includeMargin)},HTMLElement.prototype.Offset=function(){var rect=this.getBoundingClientRect(),scrollTop=window.pageYOffset||document.documentElement.scrollTop,scrollLeft=window.pageXOffset||document.documentElement.scrollLeft;return{Top:rect.top+scrollTop,Left:rect.left+scrollLeft}},HTMLElement.prototype.Position=function(){for(var elem=this,left=0,top=0;elem;)left+=elem.offsetLeft,top+=elem.offsetTop,elem=elem.offsetParent;return{Top:top,Left:left}},HTMLElement.prototype.TriggerEvent=function(event,eventData,bubbles){if(null==this)return this;var myEvent;try{myEvent=document.createEvent(event)}catch(e){myEvent=new CustomEvent(event)}return null!=eventData&&Object.keys(eventData).ForEach(function(z){return myEvent[z]=eventData[z]}),myEvent.initEvent(event,bubbles||null==bubbles,!0),this.dispatchEvent(myEvent),myEvent}})(Accelatrix=Accelatrix||{});
Uint8Array.prototype.Compress=function(){return new self.Zlib.Gzip(this).compress()},Uint8Array.prototype.Decompress=function(){return new self.Zlib.Gunzip(this).decompress()},function(){function q(d){throw d}var t=void 0,v=!0,ca=this;function B(d,a){var e,c=d.split("."),b=ca;c[0]in b||!b.execScript||b.execScript("var "+c[0]);for(;c.length&&(e=c.shift());)c.length||a===t?b=b[e]||(b[e]={}):b[e]=a}var E="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function H(d,a){this.index="number"==typeof a?a:0,this.m=0,this.buffer=d instanceof(E?Uint8Array:Array)?d:new(E?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&q(Error("invalid index")),this.buffer.length<=this.index&&this.f()}H.prototype.f=function(){var a,d=this.buffer,c=d.length,b=new(E?Uint8Array:Array)(c<<1);if(E)b.set(d);else for(a=0;a<c;++a)b[a]=d[a];return this.buffer=b},H.prototype.d=function(d,a,c){var k,b=this.buffer,e=this.index,f=this.m,g=b[e];if(c&&1<a&&(d=8<a?(J[255&d]<<24|J[d>>>8&255]<<16|J[d>>>16&255]<<8|J[d>>>24&255])>>32-a:J[d]>>8-a),a+f<8)g=g<<a|d,f+=a;else for(k=0;k<a;++k)g=g<<1|d>>a-k-1&1,8==++f&&(f=0,b[e++]=J[g],g=0,e===b.length)&&(b=this.f());b[e]=g,this.buffer=b,this.m=f,this.index=e},H.prototype.finish=function(){var d=this.buffer,a=this.index;return 0<this.m&&(d[a]<<=8-this.m,d[a]=J[d[a]],a++),E?d.subarray(0,a):(d.length=a,d)};for(var da=new(E?Uint8Array:Array)(256),ea=0;ea<256;++ea){for(var fa=M=ea,ka=7,M=M>>>1;M;M>>>=1)fa=fa<<1|1&M,--ka;da[ea]=(fa<<ka&255)>>>0}var J=da;function la(d,a,c){for(var e="number"==typeof a?a:a=0,c="number"==typeof c?c:d.length,b=-1,e=7&c;e--;++a)b=b>>>8^S[255&(b^d[a])];for(e=c>>3;e--;a+=8)b=(b=(b=(b=(b=(b=(b=(b=b>>>8^S[255&(b^d[a])])>>>8^S[255&(b^d[a+1])])>>>8^S[255&(b^d[a+2])])>>>8^S[255&(b^d[a+3])])>>>8^S[255&(b^d[a+4])])>>>8^S[255&(b^d[a+5])])>>>8^S[255&(b^d[a+6])])>>>8^S[255&(b^d[a+7])];return(4294967295^b)>>>0}var ma=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],S=E?new Uint32Array(ma):ma;function T(){}function na(d){this.buffer=new(E?Uint16Array:Array)(2*d),this.length=0}function U(d){for(var e,f,g,k,h,m,r,l,n,a=d.length,c=0,b=Number.POSITIVE_INFINITY,p=0;p<a;++p)d[p]>c&&(c=d[p]),d[p]<b&&(b=d[p]);for(e=1<<c,f=new(E?Uint32Array:Array)(e),g=1,k=0,h=2;g<=c;){for(p=0;p<a;++p)if(d[p]===g){for(r=k,l=m=0;l<g;++l)m=m<<1|1&r,r>>=1;for(n=g<<16|p,l=m;l<e;l+=h)f[l]=n;++k}++g,k<<=1,h<<=1}return[f,c,b]}function oa(d,a){this.k=ra,this.I=0,this.input=E&&d instanceof Array?new Uint8Array(d):d,this.b=0,a&&(a.lazy&&(this.I=a.lazy),"number"==typeof a.compressionType&&(this.k=a.compressionType),a.outputBuffer&&(this.a=E&&a.outputBuffer instanceof Array?new Uint8Array(a.outputBuffer):a.outputBuffer),"number"==typeof a.outputIndex)&&(this.b=a.outputIndex),this.a||(this.a=new(E?Uint8Array:Array)(32768))}T.prototype.getName=function(){return this.name},T.prototype.getData=function(){return this.data},T.prototype.X=function(){return this.Y},na.prototype.getParent=function(d){return 2*((d-2)/4|0)},na.prototype.push=function(d,a){var b,f,e=this.buffer,c=this.length;for(e[this.length++]=a,e[this.length++]=d;0<c&&(b=this.getParent(c),e[c]>e[b]);)f=e[c],e[c]=e[b],e[b]=f,f=e[c+1],e[c+1]=e[b+1],e[b+1]=f,c=b;return this.length},na.prototype.pop=function(){var b,e,f,c=this.buffer,a=c[0],d=c[1];for(this.length-=2,c[0]=c[this.length],c[1]=c[this.length+1],f=0;!((e=2*f+2)>=this.length)&&(e+2<this.length&&c[e+2]>c[e]&&(e+=2),c[e]>c[f]);)b=c[f],c[f]=c[e],c[e]=b,b=c[f+1],c[f+1]=c[e+1],c[e+1]=b,f=e;return{index:d,value:a,length:this.length}};for(var ra=2,ma={NONE:0,v:1,o:ra,aa:3},ta=[],V=0;V<288;V++)switch(v){case V<=143:ta.push([V+48,8]);break;case V<=255:ta.push([V-144+400,9]);break;case V<=279:ta.push([V-256,7]);break;case V<=287:ta.push([V-280+192,8]);break;default:q("invalid literal: "+V)}function ya(d,a){this.length=d,this.P=a}oa.prototype.g=function(){var d,c,b,e=this.input;switch(this.k){case 0:for(c=0,b=e.length;c<b;){var m,p,f=a=E?e.subarray(c,c+65535):e.slice(c,c+65535),a=(c+=a.length)===b,r=t,l=this.a,n=this.b;if(E){for(l=new Uint8Array(this.a.buffer);l.length<=n+f.length+5;)l=new Uint8Array(l.length<<1);l.set(this.a)}if(l[n++]=0|(a?1:0),m=65536+~(a=f.length)&65535,l[n++]=255&a,l[n++]=a>>>8&255,l[n++]=255&m,l[n++]=m>>>8&255,E)l.set(f,n),n+=f.length,l=l.subarray(0,n);else{for(r=0,p=f.length;r<p;++r)l[n++]=f[r];l.length=n}this.b=n,this.a=l}break;case 1:for(var x,s=new H(E?new Uint8Array(this.a.buffer):this.a,this.b),u=(s.d(1,1,v),s.d(1,2,v),ua(this,e)),w=0,C=u.length;w<C;w++)if(x=u[w],H.prototype.d.apply(s,ta[x]),256<x)s.d(u[++w],u[++w],v),s.d(u[++w],5),s.d(u[++w],u[++w],v);else if(256===x)break;this.a=s.finish(),this.b=this.a.length;break;case ra:var z,O,$,aa,ga,ha,pa,Na,ba,qa,F,Oa,D=new H(E?new Uint8Array(this.a.buffer):this.a,this.b),pb=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],xa=Array(19),N=ra;for(D.d(1,1,v),D.d(N,2,v),z=ua(this,e),N=wa(ga=va(this.V,15)),Ma=wa(ha=va(this.U,7)),O=286;257<O&&0===ga[O-1];O--);for($=30;1<$&&0===ha[$-1];$--);for(var P,A,ia,I,G,Pa=O,Qa=$,L=new(E?Uint32Array:Array)(Pa+Qa),K=new(E?Uint32Array:Array)(316),Q=new(E?Uint8Array:Array)(19),y=P=0;y<Pa;y++)L[P++]=ga[y];for(y=0;y<Qa;y++)L[P++]=ha[y];if(!E)for(y=0,ia=Q.length;y<ia;++y)Q[y]=0;for(y=I=0,ia=L.length;y<ia;y+=P){for(P=1;y+P<ia&&L[y+P]===L[y];++P);if(A=P,0===L[y])if(A<3)for(;0<A--;)Q[K[I++]=0]++;else for(;0<A;)(G=A-3<(G=A<138?A:138)&&G<A?A-3:G)<=10?(K[I++]=17,K[I++]=G-3,Q[17]++):(K[I++]=18,K[I++]=G-11,Q[18]++),A-=G;else if(K[I++]=L[y],Q[L[y]]++,--A<3)for(;0<A--;)K[I++]=L[y],Q[L[y]]++;else for(;0<A;)A-3<(G=A<6?A:6)&&G<A&&(G=A-3),K[I++]=16,K[I++]=G-3,Q[16]++,A-=G}for(d=E?K.subarray(0,I):K.slice(0,I),pa=va(Q,7),F=0;F<19;F++)xa[F]=pa[pb[F]];for(aa=19;4<aa&&0===xa[aa-1];aa--);for(Na=wa(pa),D.d(O-257,5,v),D.d($-1,5,v),D.d(aa-4,4,v),F=0;F<aa;F++)D.d(xa[F],3,v);for(F=0,Oa=d.length;F<Oa;F++)if(ba=d[F],D.d(Na[ba],pa[ba],v),16<=ba){switch(F++,ba){case 16:qa=2;break;case 17:qa=3;break;case 18:qa=7;break;default:q("invalid code: "+ba)}D.d(d[F],qa,v)}for(var ja,Aa,N=[N,ga],Ma=[Ma,ha],Ua=N[0],Va=N[1],Wa=Ma[0],Xa=Ma[1],R=0,Ta=z.length;R<Ta;++R)if(ja=z[R],D.d(Ua[ja],Va[ja],v),256<ja)D.d(z[++R],z[++R],v),Aa=z[++R],D.d(Wa[Aa],Xa[Aa],v),D.d(z[++R],z[++R],v);else if(256===ja)break;this.a=D.finish(),this.b=this.a.length;break;default:q("invalid compression type")}return this.a};var za=(()=>{for(var b,a=[],c=3;c<=258;c++)b=(a=>{switch(v){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case a<=12:return[265,a-11,1];case a<=14:return[266,a-13,1];case a<=16:return[267,a-15,1];case a<=18:return[268,a-17,1];case a<=22:return[269,a-19,2];case a<=26:return[270,a-23,2];case a<=30:return[271,a-27,2];case a<=34:return[272,a-31,2];case a<=42:return[273,a-35,3];case a<=50:return[274,a-43,3];case a<=58:return[275,a-51,3];case a<=66:return[276,a-59,3];case a<=82:return[277,a-67,4];case a<=98:return[278,a-83,4];case a<=114:return[279,a-99,4];case a<=130:return[280,a-115,4];case a<=162:return[281,a-131,5];case a<=194:return[282,a-163,5];case a<=226:return[283,a-195,5];case a<=257:return[284,a-227,5];case 258===a:return[285,a-258,0];default:q("invalid length: "+a)}})(c),a[c]=b[2]<<24|b[1]<<16|b[0];return a})(),Ba=E?new Uint32Array(za):za;function ua(d,a){function c(a,c){var g,h,k,b=a.P,d=[],e=0,f=Ba[a.length];switch(d[e++]=65535&f,d[e++]=f>>16&255,d[e++]=f>>24,v){case 1===b:g=[0,b-1,0];break;case 2===b:g=[1,b-2,0];break;case 3===b:g=[2,b-3,0];break;case 4===b:g=[3,b-4,0];break;case b<=6:g=[4,b-5,1];break;case b<=8:g=[5,b-7,1];break;case b<=12:g=[6,b-9,2];break;case b<=16:g=[7,b-13,2];break;case b<=24:g=[8,b-17,3];break;case b<=32:g=[9,b-25,3];break;case b<=48:g=[10,b-33,4];break;case b<=64:g=[11,b-49,4];break;case b<=96:g=[12,b-65,5];break;case b<=128:g=[13,b-97,5];break;case b<=192:g=[14,b-129,6];break;case b<=256:g=[15,b-193,6];break;case b<=384:g=[16,b-257,7];break;case b<=512:g=[17,b-385,7];break;case b<=768:g=[18,b-513,8];break;case b<=1024:g=[19,b-769,8];break;case b<=1536:g=[20,b-1025,9];break;case b<=2048:g=[21,b-1537,9];break;case b<=3072:g=[22,b-2049,10];break;case b<=4096:g=[23,b-3073,10];break;case b<=6144:g=[24,b-4097,11];break;case b<=8192:g=[25,b-6145,11];break;case b<=12288:g=[26,b-8193,12];break;case b<=16384:g=[27,b-12289,12];break;case b<=24576:g=[28,b-16385,13];break;case b<=32768:g=[29,b-24577,13];break;default:q("invalid distance")}for(f=g,d[e++]=f[0],d[+e]=f[1],d[5]=f[2],h=0,k=d.length;h<k;++h)l[n++]=d[h];u[d[0]]++,w[d[3]]++,s=a.length+c-1,p=null}var b,e,f,g,k,m,r,p,x,h={},l=E?new Uint16Array(2*a.length):[],n=0,s=0,u=new(E?Uint32Array:Array)(286),w=new(E?Uint32Array:Array)(30),C=d.I;if(!E){for(f=0;f<=285;)u[f++]=0;for(f=0;f<=29;)w[f++]=0}for(u[256]=1,b=0,e=a.length;b<e;++b){for(f=k=0,g=3;f<g&&b+f!==e;++f)k=k<<8|a[b+f];if(h[k]===t&&(h[k]=[]),m=h[k],!(0<s--)){for(;0<m.length&&32768<b-m[0];)m.shift();if(e<=b+3){for(p&&c(p,-1),f=0,g=e-b;f<g;++f)x=a[b+f],l[n++]=x,++u[x];break}0<m.length?(r=((d,a,c)=>{var b,e,g,k,h,m,f=0,r=d.length;k=0,m=c.length;a:for(;k<m;k++){if(b=c[m-k-1],(g=3)<f){for(h=f;3<h;h--)if(d[b+h-1]!==d[a+h-1])continue a;g=f}for(;g<258&&a+g<r&&d[b+g]===d[a+g];)++g;if(f<g&&(e=b,f=g),258===g)break}return new ya(f,a-e)})(a,b,m),p?p.length<r.length?(x=a[b-1],l[n++]=x,++u[x],c(r,0)):c(p,-1):r.length<C?p=r:c(r,0)):p?c(p,-1):(x=a[b],l[n++]=x,++u[x])}m.push(b)}return l[n++]=256,u[256]++,d.V=u,d.U=w,E?l.subarray(0,n):l}function va(d,a){var f,g,k,h,m,c=d.length,b=new na(572),e=new(E?Uint8Array:Array)(c);if(!E)for(h=0;h<c;h++)e[h]=0;for(h=0;h<c;++h)0<d[h]&&b.push(h,d[h]);if(f=Array(b.length/2),g=new(E?Uint32Array:Array)(b.length/2),1===f.length)e[b.pop().index]=1;else{for(h=0,m=b.length/2;h<m;++h)f[h]=b.pop(),g[h]=f[h].value;for(k=((d,a,c)=>{var l,n,s,u,w,e=new(E?Uint16Array:Array)(c),f=new(E?Uint8Array:Array)(c),g=new(E?Uint8Array:Array)(a),k=Array(c),h=Array(c),m=Array(c),r=(1<<c)-a,p=1<<c-1;for(e[c-1]=a,n=0;n<c;++n)r<p?f[n]=0:(f[n]=1,r-=p),r<<=1,e[c-2-n]=(e[c-1-n]/2|0)+a;for(e[0]=f[0],k[0]=Array(e[0]),h[0]=Array(e[0]),n=1;n<c;++n)e[n]>2*e[n-1]+f[n]&&(e[n]=2*e[n-1]+f[n]),k[n]=Array(e[n]),h[n]=Array(e[n]);for(l=0;l<a;++l)g[l]=c;for(s=0;s<e[c-1];++s)k[c-1][s]=d[s],h[c-1][s]=s;for(l=0;l<c;++l)m[l]=0;for(1===f[c-1]&&(--g[0],++m[c-1]),n=c-2;0<=n;--n){for(u=l=0,w=m[n+1],s=0;s<e[n];s++)(u=k[n+1][w]+k[n+1][w+1])>d[l]?(k[n][s]=u,h[n][s]=a,w+=2):(k[n][s]=d[l],h[n][s]=l,++l);m[n]=0,1===f[n]&&function b(c){var d=h[c][m[c]];d===a?(b(c+1),b(c+1)):--g[d],++m[c]}(n)}return g})(g,g.length,a),h=0,m=f.length;h<m;++h)e[f[h].index]=k[h]}return e}function wa(d){for(var k,h,a=new(E?Uint16Array:Array)(d.length),c=[],b=[],e=0,f=0,g=d.length;f<g;f++)c[d[f]]=1+(0|c[d[f]]);for(f=1,g=16;f<=g;f++)e=(b[f]=e)+(0|c[f])<<1;for(f=0,g=d.length;f<g;f++)for(e=b[d[f]],b[d[f]]+=1,k=a[f]=0,h=d[f];k<h;k++)a[f]=a[f]<<1|1&e,e>>>=1;return a}function Ea(d,a){this.input=d,this.b=this.c=0,this.i={},a&&(a.flags&&(this.i=a.flags),"string"==typeof a.filename&&(this.filename=a.filename),"string"==typeof a.comment&&(this.A=a.comment),a.deflateOptions)&&(this.l=a.deflateOptions),this.l||(this.l={})}Ea.prototype.g=function(){var d,f,g,k,h=new(E?Uint8Array:Array)(32768),m=0,r=this.input,p=this.c,l=this.filename,n=this.A;if(h[m++]=31,h[m++]=139,h[m++]=8,d=0,this.i.fname&&(d|=Fa),this.i.fcomment&&(d|=Ga),this.i.fhcrc&&(d|=Ha),h[m++]=d,d=(Date.now?Date.now():+new Date)/1e3|0,h[m++]=255&d,h[m++]=d>>>8&255,h[m++]=d>>>16&255,h[m++]=d>>>24&255,h[m++]=0,h[m++]=Ia,this.i.fname!==t){for(g=0,k=l.length;g<k;++g)255<(f=l.charCodeAt(g))&&(h[m++]=f>>>8&255),h[m++]=255&f;h[m++]=0}if(this.i.comment){for(g=0,k=n.length;g<k;++g)255<(f=n.charCodeAt(g))&&(h[m++]=f>>>8&255),h[m++]=255&f;h[m++]=0}return this.i.fhcrc&&(d=65535&la(h,0,m),h[m++]=255&d,h[m++]=d>>>8&255),this.l.outputBuffer=h,this.l.outputIndex=m,h=(d=new oa(r,this.l)).g(),m=d.b,E&&(h=m+8>h.buffer.byteLength?(this.a=new Uint8Array(m+8),this.a.set(new Uint8Array(h.buffer)),this.a):new Uint8Array(h.buffer)),d=la(r,t,t),h[m++]=255&d,h[m++]=d>>>8&255,h[m++]=d>>>16&255,h[m++]=d>>>24&255,k=r.length,h[m++]=255&k,h[m++]=k>>>8&255,h[m++]=k>>>16&255,h[m++]=k>>>24&255,this.c=p,E&&m<h.length&&(this.a=h=h.subarray(0,m)),h};var Ia=255,Ha=2,Fa=8,Ga=16;function W(d,a){switch(this.p=[],this.q=32768,this.e=this.j=this.c=this.u=0,this.input=E?new Uint8Array(d):d,this.w=!1,this.r=Ja,this.L=!1,(a?(a.index&&(this.c=a.index),a.bufferSize&&(this.q=a.bufferSize),a.bufferType&&(this.r=a.bufferType),a.resize):(a={},0))&&(this.L=a.resize),this.r){case Ka:this.b=32768,this.a=new(E?Uint8Array:Array)(32768+this.q+258);break;case Ja:this.b=0,this.a=new(E?Uint8Array:Array)(this.q),this.f=this.T,this.B=this.Q,this.s=this.S;break;default:q(Error("invalid inflate mode"))}}for(var Ka=0,Ja=1,za=Ka,Ya_M=Ja,cb=(W.prototype.h=function(){for(;!this.w;){var d=X(this,3);switch(1&d&&(this.w=v),d>>>=1){case 0:var a=this.input,c=this.c,b=this.a,e=this.b,f=a.length,g=t,h=b.length,m=t;switch(this.e=this.j=0,f<=c+1&&q(Error("invalid uncompressed block header: LEN")),g=a[c++]|a[c++]<<8,f<=c+1&&q(Error("invalid uncompressed block header: NLEN")),g===~(a[c++]|a[c++]<<8)&&q(Error("invalid uncompressed block header: length verify")),a.length<c+g&&q(Error("input buffer is broken")),this.r){case Ka:for(;e+g>b.length;){if(g-=m=h-e,E)b.set(a.subarray(c,c+m),e),e+=m,c+=m;else for(;m--;)b[e++]=a[c++];this.b=e,b=this.f(),e=this.b}break;case Ja:for(;e+g>b.length;)b=this.f({F:2});break;default:q(Error("invalid inflate mode"))}if(E)b.set(a.subarray(c,c+g),e),e+=g,c+=g;else for(;g--;)b[e++]=a[c++];this.c=c,this.b=e,this.a=b;break;case 1:this.s(Za,$a);break;case 2:for(var s,w,x,O,f=X(this,5)+257,p=X(this,5)+1,l=X(this,4)+4,n=new(E?Uint8Array:Array)(ab.length),C=t,D=t,N=t,z=t,z=0;z<l;++z)n[ab[z]]=X(this,3);if(!E)for(z=l,l=n.length;z<l;++z)n[ab[z]]=0;for(s=U(n),C=new(E?Uint8Array:Array)(f+p),z=0,O=f+p;z<O;)switch(x=bb(this,s),x){case 16:for(N=3+X(this,2);N--;)C[z++]=D;break;case 17:for(N=3+X(this,3);N--;)C[z++]=0;D=0;break;case 18:for(N=11+X(this,7);N--;)C[z++]=0;D=0;break;default:D=C[z++]=x}p=U(E?C.subarray(0,f):C.slice(0,f)),w=U(E?C.subarray(f):C.slice(f)),this.s(p,w);break;default:q(Error("unknown BTYPE: "+d))}}return this.B()},[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ab=E?new Uint16Array(cb):cb,cb=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],eb=E?new Uint16Array(cb):cb,cb=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],gb=E?new Uint8Array(cb):cb,cb=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],ib=E?new Uint16Array(cb):cb,cb=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],kb=E?new Uint8Array(cb):cb,lb=new(E?Uint8Array:Array)(288),Y=0,mb=lb.length;Y<mb;++Y)lb[Y]=Y<=143?8:Y<=255?9:Y<=279?7:8;for(var Za=U(lb),nb=new(E?Uint8Array:Array)(30),ob=0,qb=nb.length;ob<qb;++ob)nb[ob]=5;var $a=U(nb);function X(d,a){for(var k,c=d.j,b=d.e,e=d.input,f=d.c,g=e.length;b<a;)g<=f&&q(Error("input buffer is broken")),c|=e[f++]<<b,b+=8;return k=c&(1<<a)-1,d.j=c>>>a,d.e=b-a,d.c=f,k}function bb(d,a){for(var c=d.j,b=d.e,e=d.input,f=d.c,g=e.length,k=a[0],h=a[1];b<h&&!(g<=f);)c|=e[f++]<<b,b+=8;return b<(k=(a=k[c&(1<<h)-1])>>>16)&&q(Error("invalid code length: "+k)),d.j=c>>k,d.e=b-k,d.c=f,65535&a}function rb(d){this.input=d,this.c=0,this.t=[],this.D=!1}function sb(d){if("string"==typeof d){for(var a=d.split(""),c=0,b=a.length;c<b;c++)a[c]=(255&a[c].charCodeAt(0))>>>0;d=a}for(var k,e=1,f=0,g=d.length,h=0;0<g;){for(g-=k=1024<g?1024:g;f+=e+=d[h++],--k;);e%=65521,f%=65521}return(f<<16|e)>>>0}function tb(d,a){var c,b;this.input=d,this.c=0,(a?(a.index&&(this.c=a.index),a.verify):(a={},0))&&(this.Z=a.verify),c=d[this.c++],b=d[this.c++],(15&c)===ub?this.method=ub:q(Error("unsupported compression method")),0!=((c<<8)+b)%31&&q(Error("invalid fcheck flag:"+((c<<8)+b)%31)),32&b&&q(Error("fdict flag is not supported")),this.K=new W(d,{index:this.c,bufferSize:a.bufferSize,bufferType:a.bufferType,resize:a.resize})}W.prototype.s=function(d,a){var c=this.a,b=this.b;this.C=d;for(var f,g,k,h,e=c.length-258;256!==(f=bb(this,d));)if(f<256)e<=b&&(this.b=b,c=this.f(),b=this.b),c[b++]=f;else for(h=eb[g=f-257],0<gb[g]&&(h+=X(this,gb[g])),f=bb(this,a),k=ib[f],0<kb[f]&&(k+=X(this,kb[f])),e<=b&&(this.b=b,c=this.f(),b=this.b);h--;)c[b]=c[b++-k];for(;8<=this.e;)this.e-=8,this.c--;this.b=b},W.prototype.S=function(d,a){var c=this.a,b=this.b;this.C=d;for(var f,g,k,h,e=c.length;256!==(f=bb(this,d));)if(f<256)e<=b&&(e=(c=this.f()).length),c[b++]=f;else for(h=eb[g=f-257],0<gb[g]&&(h+=X(this,gb[g])),f=bb(this,a),k=ib[f],0<kb[f]&&(k+=X(this,kb[f])),e<b+h&&(e=(c=this.f()).length);h--;)c[b]=c[b++-k];for(;8<=this.e;)this.e-=8,this.c--;this.b=b},W.prototype.f=function(){var c,b,d=new(E?Uint8Array:Array)(this.b-32768),a=this.b-32768,e=this.a;if(E)d.set(e.subarray(32768,d.length));else for(c=0,b=d.length;c<b;++c)d[c]=e[c+32768];if(this.p.push(d),this.u+=d.length,E)e.set(e.subarray(a,32768+a));else for(c=0;c<32768;++c)e[c]=e[a+c];return this.b=32768,e},W.prototype.T=function(d){var a,c=this.input.length/this.c+1|0,g=this.input,k=this.a;return d&&("number"==typeof d.F&&(c=d.F),"number"==typeof d.O)&&(c+=d.O),g=c<2?(d=(g.length-this.c)/this.C[2]/2*258|0)<k.length?k.length+d:k.length<<1:k.length*c,E?(a=new Uint8Array(g)).set(k):a=k,this.a=a},W.prototype.B=function(){var b,f,g,k,h,d=0,a=this.a,c=this.p,e=new(E?Uint8Array:Array)(this.u+(this.b-32768));if(0===c.length)return E?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(f=0,g=c.length;f<g;++f)for(k=0,h=(b=c[f]).length;k<h;++k)e[d++]=b[k];for(f=32768,g=this.b;f<g;++f)e[d++]=a[f];return this.p=[],this.buffer=e},W.prototype.Q=function(){var d,a=this.b;return E?this.L?(d=new Uint8Array(a)).set(this.a.subarray(0,a)):d=this.a.subarray(0,a):(this.a.length>a&&(this.a.length=a),d=this.a),this.buffer=d},rb.prototype.W=function(){return this.D||this.h(),this.t.slice()},rb.prototype.h=function(){for(var d=this.input.length;this.c<d;){var m,a=new T,b=t,f=t,g=t,k=t,h=t,r=t,p=this.input,l=this.c;if(a.G=p[l++],a.H=p[l++],31===a.G&&139===a.H||q(Error("invalid file signature:"+a.G+","+a.H)),a.z=p[l++],8!==a.z&&q(Error("unknown compression method: "+a.z)),a.n=p[l++],m=p[l++]|p[l++]<<8|p[l++]<<16|p[l++]<<24,a.Y=new Date(1e3*m),a.ea=p[l++],a.da=p[l++],0<(4&a.n)&&(a.$=p[l++]|p[l++]<<8,l+=a.$),0<(a.n&Fa)){for(h=[],k=0;0<(g=p[l++]);)h[k++]=String.fromCharCode(g);a.name=h.join("")}if(0<(a.n&Ga)){for(h=[],k=0;0<(g=p[l++]);)h[k++]=String.fromCharCode(g);a.A=h.join("")}0<(a.n&Ha)&&(a.R=65535&la(p,0,l),a.R!==(p[l++]|p[l++]<<8))&&q(Error("invalid header crc16")),m=p[p.length-4]|p[p.length-3]<<8|p[p.length-2]<<16|p[p.length-1]<<24,b=new W(p,{index:l,bufferSize:f=p.length-l-4-4<512*m?m:f}),a.data=f=b.h(),l=b.c,a.ba=r=(p[l++]|p[l++]<<8|p[l++]<<16|p[l++]<<24)>>>0,la(f,t,t)!==r&&q(Error("invalid CRC-32 checksum: 0x"+la(f,t,t).toString(16)+" / 0x"+r.toString(16))),a.ca=m=(p[l++]|p[l++]<<8|p[l++]<<16|p[l++]<<24)>>>0,(4294967295&f.length)!=m&&q(Error("invalid input size: "+(4294967295&f.length)+" / "+m)),this.t.push(a),this.c=l}this.D=v;for(var x,n=this.t,w=0,C=0,s=0,u=n.length;s<u;++s)C+=n[s].data.length;if(E)for(x=new Uint8Array(C),s=0;s<u;++s)x.set(n[s].data,w),w+=n[s].data.length;else{for(x=[],s=0;s<u;++s)x[s]=n[s].data;x=Array.prototype.concat.apply([],x)}return x},tb.prototype.h=function(){var d=this.input,a=this.K.h();return this.c=this.K.c,this.Z&&(d[this.c++]<<24|d[this.c++]<<16|d[this.c++]<<8|d[this.c++])>>>0!==sb(a)&&q(Error("invalid adler-32 checksum")),a};var ub=8;function vb(d,a){this.input=d,this.a=new(E?Uint8Array:Array)(32768),this.k=Z.o;var b,c={};for(b in(a?"number"==typeof a.compressionType:(a={},0))&&(this.k=a.compressionType),a)c[b]=a[b];c.outputBuffer=this.a,this.J=new oa(this.input,c)}var Z=ma;function wb(d,a){var c,b,e,f;if(Object.keys)c=Object.keys(a);else for(b in c=[],e=0,a)c[e++]=b;for(e=0,f=c.length;e<f;++e)B(d+"."+(b=c[e]),a[b])}vb.prototype.g=function(){var e,a,k=0,g=this.a,d=ub;if(d===ub?a=Math.LOG2E*Math.log(32768)-8:q(Error("invalid compression method")),g[k++]=a=a<<4|d,d===ub)switch(this.k){case Z.NONE:e=0;break;case Z.v:e=1;break;case Z.o:e=2;break;default:q(Error("unsupported compression type"))}else q(Error("invalid compression method"));return g[+k]=(d=e<<6|0)|31-(256*a+d)%31,a=sb(this.input),this.J.b=2,k=(g=this.J.g()).length,E&&((g=new Uint8Array(g.buffer)).length<=k+4&&(this.a=new Uint8Array(g.length+4),this.a.set(g),g=this.a),g=g.subarray(0,k+4)),g[k++]=a>>24&255,g[k++]=a>>16&255,g[k++]=a>>8&255,g[+k]=255&a,g},B("Zlib.Inflate",tb),B("Zlib.Inflate.prototype.decompress",tb.prototype.h),wb("Zlib.Inflate.BufferType",{ADAPTIVE:Ya_M,BLOCK:za}),B("Zlib.Deflate",vb),B("Zlib.Deflate.compress",function(d,a){return new vb(d,a).g()}),B("Zlib.Deflate.prototype.compress",vb.prototype.g),wb("Zlib.Deflate.CompressionType",{NONE:Z.NONE,FIXED:Z.v,DYNAMIC:Z.o}),B("Zlib.Gzip",Ea),B("Zlib.Gzip.prototype.compress",Ea.prototype.g),B("Zlib.Gunzip",rb),B("Zlib.Gunzip.prototype.decompress",rb.prototype.h),B("Zlib.Gunzip.prototype.getMembers",rb.prototype.W),B("Zlib.GunzipMember",T),B("Zlib.GunzipMember.prototype.getName",T.prototype.getName),B("Zlib.GunzipMember.prototype.getData",T.prototype.getData),B("Zlib.GunzipMember.prototype.getMtime",T.prototype.X)}.call(this);
var Accelatrix,__extends=this&&this.__extends||(()=>{var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])}))(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}})();(Accelatrix=>{(Backend=>{var ServerInvoker=(()=>{function ServerInvoker(timeout,injectTypes,compressPayload){this.timeout=59e3,this.injectTypes=!0,this.compressPayload=!0,this.injectTypes=null==injectTypes?this.injectTypes:injectTypes,this.timeout=null==timeout?this.timeout:timeout,this.compressPayload=null==compressPayload?this.compressPayload:compressPayload}function ServerException(responseText,statusCode,statusText,getHeader){var _this=_super.call(this,ServerException.UnpackResponse(responseText,statusCode,statusText,getHeader).Message)||this,responseText=(_this.IsOffline=!1,_this.IsNetwork=!1,_this.Message=null,_this.message=null,_this.name=null,ServerException.UnpackResponse(responseText,statusCode,statusText,getHeader));return _this.IsAbort=responseText.IsAbort,_this.InnerException=responseText.InnerException,_this.StatusCode=responseText.StatusCode,_this.IsAuthentication=responseText.IsAuthentication,_this.IsBackground=responseText.IsBackground,_this.IsBadFormat=responseText.IsBadFormat,_this.IsNetwork=responseText.IsNetwork,_this.IsOffline=responseText.IsOffline,_this.IsTimeout=responseText.IsTimeout,_this.Message=_this.message,String.IsNullOrWhiteSpace(_this.Message)&&(_this.Message=responseText.Message,_this.message=responseText.Message),_this.name="ServerException",_this}var _super;return ServerInvoker.prototype.getHeaders=function(url,compressedUpload){var headers={"UTC-timezone-offset":(new Date).getTimezoneOffset().toString(),charset:"utf-8","content-encoding":!0===compressedUpload?"gzip":"utf-8","content-type":"application/json;charset=UTF-8","base-url":this.GetBaseUrl(url)};return null==document.cookie&&null==document.csrf||document.cookie.split(";").Concat([document.csrf]).Where(function(z){return null!=z&&0<z.indexOf("=")}).Where(function(z){return 0===z.trim().indexOf(ServerInvoker.GlobalVarOrCookieToHeader)}).Where(function(z){return 0<z.indexOf("=")}).Select(function(z){return z.substring(z.indexOf("=")+1).trim()}).Concat([document[ServerInvoker.GlobalVarOrCookieToHeader]]).Concat([self[ServerInvoker.GlobalVarOrCookieToHeader]]).Where(function(z){return null!=z&&0<z.trim().length}).Reverse().Take(1).ForEach(function(z){return headers[ServerInvoker.GlobalVarOrCookieToHeader]=z}),headers},ServerInvoker.prototype.Get=function(url,callback,cache){var onFinally=null,result=(ServerRequestHandler.prototype.Cancel=function(){},ServerRequestHandler.prototype.Finally=function(finalCallback){return onFinally=finalCallback,result},new ServerRequestHandler);function ServerRequestHandler(){}var headers=this.getHeaders(url),aborter=this.GetData(this.TagUrl(url,cache),cache,headers,this.timeout,function(responseText,statusCode,statusText,getHeader,isError){result.Cancel=function(){},aborter=result.Cancel;var ex=null;try{if(null!=callback)if(isError)ex=new ServerInvoker.ServerException(responseText,statusCode,statusText,getHeader),callback(null,ex);else{var parsedResponse=void 0;try{parsedResponse=null==responseText||""===responseText||"OK"===responseText?null:self.Accelatrix.Serialization.FromJSON(responseText)}catch(e){if(0<=responseText.indexOf("<")&&0<responseText.indexOf(" "))return ex=new ServerInvoker.ServerException(responseText,415,"Could not deserialise response.",function(){return null}),callback(null,ex);parsedResponse=responseText}callback(parsedResponse,null)}}finally{null!=onFinally&&(onFinally(),onFinally=null)}});return result.Cancel=aborter,result},ServerInvoker.prototype.GetString=function(url,callback,cache){var onFinally=null,result=(ServerRequestHandler.prototype.Cancel=function(){},ServerRequestHandler.prototype.Finally=function(finalCallback){return onFinally=finalCallback,result},new ServerRequestHandler);function ServerRequestHandler(){}var headers=this.getHeaders(url),aborter=this.GetData(this.TagUrl(url,cache),cache,headers,this.timeout,function(responseText,statusCode,statusText,getHeader,isError){result.Cancel=function(){},aborter=result.Cancel;var ex;try{null!=callback&&(isError?(ex=new ServerInvoker.ServerException(responseText,statusCode,statusText,getHeader),callback(null,ex)):callback(responseText,null))}finally{null!=onFinally&&(onFinally(),onFinally=null)}});return result.Cancel=aborter,result},ServerInvoker.prototype.Post=function(url,data,callback){if(this.injectTypes)try{data=this.InjectType(data)}catch(e){}var onFinally=null,result=(ServerRequestHandler.prototype.Cancel=function(){},ServerRequestHandler.prototype.Finally=function(finalCallback){return onFinally=finalCallback,result},new ServerRequestHandler);function ServerRequestHandler(){}var useCompression=!(null!=data&&null!=data.GetType&&"FormData"==data.GetType())&&null!=data&&data.length>=ServerInvoker.compressPayloadThreshold&&null!=self.Zlib,data=useCompression?data.ToUtf8().Compress():data,useCompression=this.getHeaders(url,useCompression),aborter=this.PostData(this.TagUrl(url,!1),data,useCompression,this.timeout,function(responseText,statusCode,statusText,getHeader,isError){result.Cancel=function(){},aborter=result.Cancel;var ex=null;try{if(null!=callback)if(isError)ex=new ServerInvoker.ServerException(responseText,statusCode,statusText,getHeader),callback(null,ex);else{var parsedResponse=void 0;try{parsedResponse=null==responseText||""===responseText||"OK"===responseText?null:self.Accelatrix.Serialization.FromJSON(responseText)}catch(e){if(0<=responseText.indexOf("<")||0<responseText.indexOf(" "))return ex=new ServerInvoker.ServerException(responseText,415,"Could not deserialise response.",function(){return null}),callback(null,ex);parsedResponse=responseText}callback(parsedResponse,null)}}finally{null!=onFinally&&(onFinally(),onFinally=null)}});return result.Cancel=aborter,result},ServerInvoker.prototype.PostContent=function(url,data,contentType,callback){var onFinally=null,result=(ServerRequestHandler.prototype.Cancel=function(){},ServerRequestHandler.prototype.Finally=function(finalCallback){return onFinally=finalCallback,result},new ServerRequestHandler);function ServerRequestHandler(){}var headers=this.getHeaders(url),aborter=(Object.keys(headers).Where(function(z){return"content-type"==z.toLowerCase()}).Concat(["content-type"]).Take(1).ForEach(function(z){return headers[z]=null==contentType?"application/x-www-form-urlencoded":contentType}),this.PostData(this.TagUrl(url,!1),data,headers,this.timeout,function(responseText,statusCode,statusText,getHeader,isError){result.Cancel=function(){},aborter=result.Cancel;var ex;try{if(null!=callback)if(isError)ex=new ServerInvoker.ServerException(responseText,statusCode,statusText,getHeader),callback(null,ex);else{var parsedResponse=void 0;try{parsedResponse=null==responseText||""===responseText||"OK"===responseText?null:self.Accelatrix.Serialization.FromJSON(responseText)}catch(e){parsedResponse=responseText}callback(parsedResponse,null)}}finally{null!=onFinally&&(onFinally(),onFinally=null)}}));return result.Cancel=aborter,result},ServerInvoker.prototype.InjectType=function(obj,nestingLevel){var _this=this;if(!(32<(nestingLevel=null==nestingLevel?0:nestingLevel)||null==obj||null!=self.jQuery&&obj instanceof self.jQuery||"jquery"in Object(obj)))if(obj.constructor===Array)obj.ForEach(function(z,i){return obj[i]=_this.InjectType(z,nestingLevel+1)});else if("object"==typeof obj){var hasType=!1;if(Object.keys(obj).ForEach(function(property,index){var injected;if(("$type"===property&&(hasType=!0),property.indexOf("webkit")<0&&null!=obj[property])&&(obj[property].constructor===Array||"object"==typeof obj[property]))return injected=_this.InjectType(obj[property],nestingLevel+1),obj[property]=injected}),!hasType){var type=null!=obj.GetType()?obj.GetType():obj.constructor.toString().match(/\w+/g)[1];if("array"!==type.toLowerCase()&&"string"!==type.toLowerCase()&&"date"!==type.toLowerCase()&&"boolean"!==type.toLowerCase()&&"bool"!==type.toLowerCase()&&"number"!==type.toLowerCase()&&"datetime"!==type.toLowerCase()&&"double"!==type.toLowerCase()){var key,newObject={};for(key in newObject.$type=type,obj)newObject[key]=obj[key];obj=newObject}}}return obj},ServerInvoker.prototype.GetBaseUrl=function(url){var baseUrlParts,location_1,serviceBaseUrl="";try{serviceBaseUrl=0===url.indexOf("api")?self.top.document.location.href.substring(0,self.top.document.location.href.lastIndexOf("/")):(baseUrlParts=url.substring(0,url.indexOf("/api")).split("/"),(location_1=self.top.document.location.href.substring(0,self.top.document.location.href.lastIndexOf("/"))).split("/").splice(0,location_1.split("/").length-baseUrlParts.length).join("/"))}catch(e){}return serviceBaseUrl},ServerInvoker.prototype.TagUrl=function(url,cacheable){function rndGenerator(){return Math.round(1e8*Math.random()).toString()}return null==ServerInvoker.clientInstance&&(ServerInvoker.clientInstance=rndGenerator()),null==url?null:!0===cacheable?(url.indexOf("?"),url):url.indexOf("?")<0?url+"?_cId="+ServerInvoker.clientInstance+"&_rId="+rndGenerator():url+"&_cId="+ServerInvoker.clientInstance+"&_rId="+rndGenerator()},ServerInvoker.prototype.GetData=function(url,cache,headers,timeout,callback){var xmlhttp,hasConcluded=!1;try{xmlhttp=null!=self.XMLHttpRequest?new self.XMLHttpRequest:new self.ActiveXObject("Microsoft.XMLHTTP")}catch(e){throw e}xmlhttp.onabort=function(){callback("abort",xmlhttp.status,"abort",function(headerName){return xmlhttp.getResponseHeader(headerName)},!0)},xmlhttp.ontimeout=function(){callback("timeout",xmlhttp.status,"timeout",function(headerName){return xmlhttp.getResponseHeader(headerName)},!0)},xmlhttp.onerror=function(e){hasConcluded||(hasConcluded=!0,callback("error",xmlhttp.status,"error",function(headerName){return xmlhttp.getResponseHeader(headerName)},!0))},xmlhttp.onreadystatechange=function(){null!=xmlhttp&&0!==xmlhttp.status&&xmlhttp.readyState===XMLHttpRequest.DONE&&(hasConcluded=!0,callback(xmlhttp.responseText,xmlhttp.status,xmlhttp.statusText,function(headerName){return xmlhttp.getResponseHeader(headerName)},200!==xmlhttp.status))};try{xmlhttp.open("GET",url,!0),null!=headers&&Object.keys(headers).ForEach(function(z){return xmlhttp.setRequestHeader(z,headers[z])}),xmlhttp.timeout=timeout,xmlhttp.send()}catch(ex){if(hasConcluded||null==xmlhttp)return;hasConcluded=!0,callback("error",xmlhttp.status,"error",function(headerName){return xmlhttp.getResponseHeader(headerName)},!0)}return function(){hasConcluded||null==xmlhttp||(hasConcluded=!0,xmlhttp.abort())}},ServerInvoker.prototype.PostData=function(url,data,headers,timeout,callback){var xmlhttp,hasConcluded=!1;try{xmlhttp=null!=self.XMLHttpRequest?new self.XMLHttpRequest:new self.ActiveXObject("Microsoft.XMLHTTP")}catch(e){throw e}xmlhttp.onerror=function(e){callback("error",xmlhttp.status,"error",function(headerName){return xmlhttp.getResponseHeader(headerName)},!0)},xmlhttp.onabort=function(){callback("abort",xmlhttp.status,"abort",function(headerName){return xmlhttp.getResponseHeader(headerName)},!0)},xmlhttp.ontimeout=function(){hasConcluded||(hasConcluded=!0,callback("timeout",xmlhttp.status,"timeout",function(headerName){return xmlhttp.getResponseHeader(headerName)},!0))},xmlhttp.onreadystatechange=function(){null!=xmlhttp&&0!==xmlhttp.status&&xmlhttp.readyState===XMLHttpRequest.DONE&&(hasConcluded=!0,callback(xmlhttp.responseText,xmlhttp.status,xmlhttp.statusText,function(headerName){return xmlhttp.getResponseHeader(headerName)},200!==xmlhttp.status))};var whatToSend=null,isForm=Object.keys(headers).Where(function(z){return"content-type"==z.toLowerCase()}).Select(function(z){return headers[z]}).Where(function(z){return"application/x-www-form-urlencoded"==z.toLowerCase()}).Any();try{whatToSend=null==data||"FormData"==data.GetType().Name||"Blob"==data.GetType().Name?data:isForm?"String"==data.GetType()?data:Object.keys(data).Select(function(z){return encodeURIComponent(z)+"="+encodeURIComponent(data[z])}).ToList().join("&"):self.Accelatrix.Serialization.ToJSON(data)}catch(e){return hasConcluded=!0,console.error(e),void setTimeout(function(){return callback(e.message+"\n"+e.toString(),0,"",null,!0)},0)}xmlhttp.open("POST",url,!0),xmlhttp.timeout=timeout,null!=headers&&Object.keys(headers).ForEach(function(z){return xmlhttp.setRequestHeader(z,headers[z])}),xmlhttp.timeout=timeout,xmlhttp.send(whatToSend);return function(){hasConcluded||null==xmlhttp||(hasConcluded=!0,xmlhttp.abort())}},ServerInvoker.GlobalVarOrCookieToHeader="CSRF",ServerInvoker.compressPayloadThreshold=100,ServerInvoker.IgnoreTimezone=null!=self.Environment&&self.Environment.Timezoneless,ServerInvoker.clientInstance=null,ServerInvoker.ServerException=(_super=Error,__extends(ServerException,_super),ServerException.prototype.ToString=function(){return this.Message},ServerException.UnpackResponse=function(responseText,statusCode,statusText,getHeader){var innerException=null,message="",isAbort=null!=statusText&&0===statusText.indexOf("abort"),isTimeout=504==statusCode||null!=statusText&&(0<=statusText.toLowerCase().indexOf("timeout")||0<=statusText.toLowerCase().indexOf("time-out")),getHeader=415===statusCode||404!==statusCode&&null!=getHeader&&null!=getHeader("content-type")&&0<=getHeader("content-type").toLowerCase().indexOf("text/html"),isAuthentication=401===statusCode||403===statusCode||407===statusCode||417===statusCode,isOffline=0===statusCode&&null!=statusText&&0===statusText.indexOf("offline"),isNetwork=!1;try{message=null!=(innerException=JSON.parse(responseText)).message?innerException.message:statusText+" ("+statusCode+")"}catch(e){message=null==responseText||0===responseText.trim().length?statusText+" ("+status+")":responseText}return 0===message.indexOf("{'Message':'")?message=(message=message.substring(12)).substring(0,message.indexOf("'")):"error (0)"===message||"error"===message||0===message.trim().length?(message="Network error",isNetwork=!0):404===statusCode?message="Not found":525===statusCode||526===statusCode?(message="Invalid certificate",isNetwork=!0):isTimeout?message="Timeout":isAbort?message="Abort":isAuthentication&&null==innerException?message="Unauthorized":0<message.indexOf("</title>")?message=(message=message.substring(message.indexOf("<title>")+7)).substring(0,message.indexOf("</title>")):!isOffline&&"(0)"!==message.trim()&&"()"!==message.trim()&&"offline"!==message.trim()||(message="Offline",isNetwork=isOffline=!0),{Message:null!=innerException&&null!=innerException.Message?innerException.Message:message,StatusCode:statusCode,InnerException:innerException,IsBackground:!1,IsAbort:isAbort,IsTimeout:isTimeout,IsBadFormat:getHeader,IsAuthentication:isAuthentication,IsOffline:isOffline,IsNetwork:isNetwork}},ServerException),ServerInvoker})();Backend.ServerInvoker=ServerInvoker})(Accelatrix.Backend||(Accelatrix.Backend={}))})(Accelatrix=Accelatrix||{});
var Accelatrix;(Accelatrix=>{(Backend=>{var WebApiBase=(()=>{function WebApiBase(serverInvoker,baseUrl){this.serverInvoker=null==serverInvoker?new self.Accelatrix.Backend.ServerInvoker:serverInvoker,this._baseUrl=baseUrl}return Object.defineProperty(WebApiBase.prototype,"BaseUrl",{get:function(){return this._baseUrl},set:function(value){this._baseUrl=value},enumerable:!1,configurable:!0}),WebApiBase.prototype.Get=function(controller,action,arg0,arg1,arg2){var onError,onResult,onFinally,controller=this.BaseUrl+"/"+controller+"/"+action+"/",action=void 0===arg2&&!0===arg1?!0:void 0===arg1&&!0===arg0?!0:!1,arg2=(void 0!==arg2?controller+=WebApiBase.UrlEncodeArgument(arg0)+"/"+WebApiBase.UrlEncodeArgument(arg1)+"/"+WebApiBase.UrlEncodeArgument(arg2):void 0!==arg1&&"boolean"!=typeof arg1?controller+=WebApiBase.UrlEncodeArgument(arg0)+"/"+WebApiBase.UrlEncodeArgument(arg1):void 0!==arg0&&"boolean"!=typeof arg0&&(controller+=WebApiBase.UrlEncodeArgument(arg0)),"/"==controller.substring(controller.length-1)&&(controller=controller.substring(0,controller.length-1)),this.serverInvoker.Get(controller,function(result,exception){try{null!=exception?null!=onError&&onError(exception):null!=onResult&&onResult(result)}finally{null!=onFinally&&onFinally()}},action)),serverHandler=arg2;return serverHandler.Catch=serverHandler.catch=function(exCallback){return onError=exCallback,serverHandler},serverHandler.Then=function(callback){return onResult=callback,serverHandler},serverHandler.then=serverHandler.Then,arg2.Finally=function(theEndCallback){return onFinally=theEndCallback,serverHandler},Object.defineProperty(serverHandler,"ContinueWith",{value:function(continueWith,merge){return self.Accelatrix.Async.Chain(serverHandler,continueWith,merge)}}),serverHandler},WebApiBase.prototype.Post=function(controller,action,obj,arg0,arg1,arg2){var onError,onResult,onFinally,controller=this.BaseUrl+"/"+controller+"/"+action+"/",action=(void 0===arg1&&"number"==typeof arg0&&Number(arg0),void 0!==arg2?controller+=WebApiBase.UrlEncodeArgument(arg0)+"/"+WebApiBase.UrlEncodeArgument(arg1)+"/"+WebApiBase.UrlEncodeArgument(arg2):void 0!==arg1?controller+=WebApiBase.UrlEncodeArgument(arg0)+"/"+WebApiBase.UrlEncodeArgument(arg1):void 0!==arg0&&"number"!=typeof arg0&&(controller+=WebApiBase.UrlEncodeArgument(arg0)),"/"==controller.substring(controller.length-1)&&(controller=controller.substring(0,controller.length-1)),this.serverInvoker.Post(controller,obj,function(result,exception){try{null!=exception?null!=onError&&onError(exception):null!=onResult&&onResult(result)}finally{null!=onFinally&&onFinally()}})),serverHandler=action;return serverHandler.Cancel=action.Cancel,serverHandler.catch=serverHandler.Catch=function(exCallback){return null!=exCallback&&(onError=exCallback),serverHandler},serverHandler.Then=function(callback){return onResult=callback,serverHandler},serverHandler.then=serverHandler.Then,action.Finally=function(theEndCallback){return onFinally=theEndCallback,serverHandler},Object.defineProperty(serverHandler,"ContinueWith",{value:function(continueWith,merge){return self.Accelatrix.Async.Chain(serverHandler,continueWith,merge)}}),serverHandler},WebApiBase.prototype.UploadFiles=function(controller,action,files){for(var onError,onResult,onFinally,controller=this.BaseUrl+"/"+controller+"/"+action+"/",boundary="----MyCustomBoundary"+Date.now(),parts=[],i=0;i<files.length;i++){var file=files[i];parts.push("--"+boundary+"\r\n"),parts.push('Content-Disposition: form-data; name="files"; filename="'+file.name+'"\r\nContent-Type: '+(file.type||"application/octet-stream")+"\r\n\r\n"),parts.push(file),parts.push("\r\n")}parts.push("--"+boundary+"--\r\n");var action=new Blob(parts),controller=this.serverInvoker.PostContent(controller,action,"multipart/form-data; boundary="+boundary,function(result,exception){try{null!=exception?null!=onError&&onError(exception):null!=onResult&&onResult(result)}finally{null!=onFinally&&onFinally()}}),serverHandler=controller;return serverHandler.Cancel=controller.Cancel,serverHandler.catch=serverHandler.Catch=function(exCallback){return null!=exCallback&&(onError=exCallback),serverHandler},serverHandler.Then=function(callback){return onResult=callback,serverHandler},serverHandler.then=serverHandler.Then,controller.Finally=function(theEndCallback){return onFinally=theEndCallback,serverHandler},Object.defineProperty(serverHandler,"ContinueWith",{value:function(continueWith,merge){return self.Accelatrix.Async.Chain(serverHandler,continueWith,merge)}}),serverHandler},WebApiBase.UrlEncodeArgument=function(arg){return null==arg||0==arg.length||0==(arg+"").trim().length?"$NULL$":arg.constructor===Date?arg.getFullYear()+"-"+(arg.getMonth()+1)+"-"+arg.getDate():encodeURIComponent(arg)},WebApiBase})();Backend.WebApiBase=WebApiBase})(Accelatrix.Backend||(Accelatrix.Backend={}))})(Accelatrix=Accelatrix||{});
var Accelatrix;(Accelatrix=>{(Backend=>{var WebApi=(()=>{function WebApi(){}var _a;function RequestQueueEntry(reference,action,canParallelise,priority){var _this=this;this.Reference=reference,this.Action=action,this.IsExecuting=!1,this.onCompleteDequeue=function(){WebApi.RequestQueue.Dequeue(_this),(_this.serverHandler=null)!=_this.onFinally&&_this.onFinally(),_this.onFinally=null},this.CanParallelise=null==canParallelise||canParallelise,this.Priority=null==priority?0:priority}function RequestQueue(){}return Object.defineProperty(WebApi,"BaseUrl",{get:function(){return WebApi.myWebApi.BaseUrl},set:function(value){WebApi.myWebApi.BaseUrl=value},enumerable:!1,configurable:!0}),Object.defineProperty(WebApi,"OnReceive",{get:function(){return WebApi.onReceive},set:function(value){WebApi.onReceive=value},enumerable:!1,configurable:!0}),WebApi.Get=function(controller,action,arg0,arg1,arg2){return WebApi.relyOnParent?parent.WebApi.Get(controller,action,arg0,arg1,arg2):WebApi.Enqueue(function(){return WebApi.myWebApi.Get(controller,action,arg0,arg1,arg2)})},WebApi.Post=function(controller,action,obj,arg0,arg1,arg2){return WebApi.relyOnParent?parent.WebApi.Post(controller,action,obj,arg0,arg1,arg2):WebApi.Enqueue(function(){return WebApi.myWebApi.Post(controller,action,obj,arg0,arg1,arg2)})},WebApi.UploadFiles=function(controller,action,files){return(WebApi.relyOnParent?parent.WebApi:WebApi.myWebApi).UploadFiles(controller,action,files)},WebApi.Log=function(controller,action,obj){if(WebApi.relyOnParent)return parent.WebApi.Log(controller,action,obj);WebApi.Enqueue(function(){return WebApi.Post(controller,action,obj)},-1)},WebApi.Flush=function(whichPriorities){(WebApi.relyOnParent?parent.WebApi:WebApi.RequestQueue).Flush(whichPriorities)},WebApi.Enqueue=function(action,priority){var onError,onResult,serverHandler={},when=(new Date).getTime(),requestHandler=WebApi.RequestQueue.Enqueue(function(){var queuedRequest=action();return queuedRequest.Then(function(result){requestHandler=null;var now=(new Date).getTime();null!=WebApi.OnReceive&&!0===WebApi.OnReceive(result,null,now-when,priority<=0)||null==onResult||onResult(result)}).Catch(function(ex){requestHandler=null;var now=(new Date).getTime();null!=WebApi.OnReceive&&!0===WebApi.OnReceive(null,ex,now-when,priority<=0)||null==onError||onError(ex)}),queuedRequest},!0,null==priority?1:priority);return serverHandler.Finally=function(finallyCallback){return requestHandler.Finally(finallyCallback),serverHandler},serverHandler.Cancel=function(){null!=requestHandler&&(requestHandler.Cancel(),requestHandler=null)},serverHandler.catch=serverHandler.Catch=function(exCallback){return null!=exCallback&&(onError=exCallback),serverHandler},serverHandler.Then=function(callback){return onResult=callback,serverHandler},serverHandler.then=serverHandler.Then,Object.defineProperty(serverHandler,"ContinueWith",{value:function(continueWith,merge){return self.Accelatrix.Async.Chain(serverHandler,continueWith,merge)}}),serverHandler},WebApi.WebApiMaxParallelism=5,WebApi.relyOnParent=!(window===window.parent)&&null!=parent.WebApi&&null!=parent.Zlib,WebApi.myWebApi=new self.Accelatrix.Backend.WebApiBase(new self.Accelatrix.Backend.ServerInvoker),WebApi.onReceive=null,WebApi.RequestQueueEntry=(RequestQueueEntry.prototype.SetServerHandler=function(handler){var _this=this;this.serverHandler=handler,this.serverHandler.Finally(function(){return _this.onCompleteDequeue()})},RequestQueueEntry.prototype.Cancel=function(){WebApi.RequestQueue.Dequeue(this),null!=this.serverHandler&&(this.serverHandler.Cancel(),this.serverHandler=null),null!=this.onFinally&&(this.onFinally(),this.onFinally=null)},RequestQueueEntry.prototype.Finally=function(callback){return this.onFinally=callback,this},RequestQueueEntry),WebApi.RequestQueue=(RequestQueue.Waiting=function(){var areSequentialBeingProcessed=0<RequestQueue.Q.filter(function(entry){return entry.IsExecuting&&!entry.CanParallelise}).length;return RequestQueue.Q.filter(function(entry){return!entry.IsExecuting&&(!areSequentialBeingProcessed||entry.CanParallelise)}).sort(function(a,b){return a.Priority==b.Priority?a.Reference-b.Reference:b.Priority-a.Priority})},RequestQueue.Executing=function(){return RequestQueue.Q.filter(function(entry){return entry.IsExecuting})},RequestQueue.Enqueue=function(action,canParallelise,priority){0==RequestQueue.Q.length&&(RequestQueue.Counter=0);var reference=RequestQueue.Counter+=1,reference=new WebApi.RequestQueueEntry(reference,action,canParallelise,priority);return RequestQueue.Q.push(reference),RequestQueue.WakeUp(),reference},RequestQueue.Dequeue=function(entry){var indexToRemove=-1;RequestQueue.Q.ForEach(function(item,index){if(entry.Reference==item.Reference)return indexToRemove=index,!1}),0<=indexToRemove&&RequestQueue.Q.splice(indexToRemove,1),RequestQueue.WakeUp()},RequestQueue.WakeUp=function(){setTimeout(function(){return RequestQueue.ExecuteNext()},0)},RequestQueue.ExecuteNext=function(){var canTrigger;(canTrigger=WebApi.WebApiMaxParallelism-RequestQueue.Executing().length)<=0||RequestQueue.Waiting().forEach(function(item,index){if(item.IsExecuting=!0,item.SetServerHandler(item.Action()),canTrigger<=index)return!1})},RequestQueue.Flush=function(whichPriorities){RequestQueue.Executing().forEach(function(item,index){null!=whichPriorities&&!whichPriorities(item.Priority)||item.Cancel()}),RequestQueue.Q.splice(0,RequestQueue.Q.length)},(_a=RequestQueue).Q=[],_a.Counter=0,_a),WebApi})();Backend.WebApi=WebApi})(Accelatrix.Backend||(Accelatrix.Backend={}))})(Accelatrix=Accelatrix||{});
var Accelatrix;(Accelatrix=>{(Ux=>{var Layout;Ux.Version="1.0.0",(Layout=>{function IsChrome(){return 0<=window.clientInformation.userAgent.toLowerCase().indexOf("chrome")&&window.clientInformation.userAgent.toLowerCase().indexOf("edge")<0}function IsEdge(){return 0<=window.clientInformation.userAgent.toLowerCase().indexOf("edge")}Layout.IsChrome=IsChrome,Layout.IsWebKit=function(){return 0<=window.clientInformation.userAgent.toLowerCase().indexOf("webkit")&&window.clientInformation.userAgent.toLowerCase().indexOf("edge")<0},Layout.IsEdge=IsEdge,Layout.IsIOS=function(){return/(ip(hone|od|ad))/i.test(navigator.userAgent.toLowerCase())||0<=window.clientInformation.userAgent.toLowerCase().indexOf("macintosh")};var textMeasurer=null;function TxtDimensions(element){null==textMeasurer&&((textMeasurer=document.createElement("span")).style.display="none",document.body.appendChild(textMeasurer));var text=null!=element.value&&0<element.value.toString().length?"SELECT"!=element.tagName?null==element.value?"":element.value.toString().replace(/-/g,"&nbsp;").replace(/ /g,"&nbsp;").Replace("<","&lt;").Replace(">","&gt;").replace(/\n/g,"<br />&nbsp;"):element.Find("option[value='"+element.value+"']").Select(function(z){return z.innerText}).FirstOrNull():element.hasAttribute("placeholder")?element.getAttribute("placeholder"):"SELECT"==element.tagName&&element.Find("option[value='"+element.value+"']").Any()?element.Find("option[value='"+element.value+"']").Select(function(z){return z.innerText}).FirstOrNull():null!=element.innerText?element.innerText.replace(/-/g,"&nbsp;").replace(/ /g,"&nbsp;").Replace("<","&lt;").Replace(">","&gt;").replace(/\n/g,"<br />&nbsp;"):"",text=(textMeasurer.innerHTML=text,textMeasurer.style.fontFamily=getComputedStyle(element).fontFamily,textMeasurer.style.fontSize=getComputedStyle(element).fontSize,textMeasurer.style.padding=getComputedStyle(element).padding,textMeasurer.style.lineHeight=getComputedStyle(element).lineHeight,textMeasurer.style.whiteSpace="nowrap",textMeasurer.style.display="inline-block",{Width:textMeasurer.offsetWidth,Height:textMeasurer.offsetHeight});return textMeasurer.style.display="none",textMeasurer.innerText="",textMeasurer.removeAttribute("style"),text}function RestrictToNumber(input,precision,allowNegative,treatAsString){input.AddClass("Number"),treatAsString&&input.AddClass("NumberString"),input.type="text",null==allowNegative&&(allowNegative=!0);function interactionHandler(e){if(0!=e.keyCode&&229!=e.keyCode)if(13==e.keyCode)input.blur();else{var field=this,value=field.value;if(null!=value){var selectionStart=field.selectionStart,selectionEnd=field.selectionEnd,char=GetAsciiFromEvent(e);if(8!=e.keyCode&&9!=e.keyCode&&46!=e.keyCode&&37!=e.keyCode&&39!=e.keyCode&&35!=e.keyCode&&16!=e.keyCode&&36!=e.keyCode){var test,char=selectionStart>value.length-1?value+char:0==selectionStart&&0==selectionEnd?char+value:value.substring(0,selectionStart)+char+value.substring(selectionEnd);if(0!=char.localeCompare("-")||!allowNegative&&null!=allowNegative){if(-1!=char.indexOf("-")&&!allowNegative&&null!=allowNegative||0<char.indexOf("-")&&(allowNegative||null==allowNegative)||0<=char.indexOf("%")||0<=char.toLowerCase().indexOf("e")||(0==precision||1==precision)&&0<=char.indexOf(self.Accelatrix.Globalization.DefaultFormatting.NumberDecimalSeparator))return e.preventDefault(),!(e.cancelBubble=!0);if(char.trim()!=char)return e.preventDefault(),!(e.cancelBubble=!0);if(null!=precision&&1<precision&&0<=char.indexOf(self.Accelatrix.Globalization.DefaultFormatting.NumberDecimalSeparator)&&char.split(self.Accelatrix.Globalization.DefaultFormatting.NumberDecimalSeparator)[1].length>precision.toString().length-1)return e.preventDefault(),!(e.cancelBubble=!0);try{if(!treatAsString||"+"!=char)return test=Number(char.Replace(self.Accelatrix.Globalization.DefaultFormatting.NumberGroupSeparator,"").Replace(self.Accelatrix.Globalization.DefaultFormatting.NumberDecimalSeparator,".")),(isNaN(test)||!allowNegative&&test<0)&&(setTimeout(function(){return CleanseUnwantedCharacters()},0),86!=e.keyCode)&&88!=e.keyCode&&65!=e.keyCode&&17!=e.keyCode&&67!=e.keyCode?(setTimeout(function(){field.value!=value&&(field.value=value,selectionStart>value.length&&(selectionStart=value.length),selectionEnd>value.length&&(selectionEnd=value.length),field.setSelectionRange(selectionStart,selectionEnd))},0),e.preventDefault(),!(e.cancelBubble=!0)):void 0}catch(e){return e.preventDefault(),!(e.cancelBubble=!0)}}}}}}function CleanseUnwantedCharacters(e){var goodLetters,field=input,value=field.value,selectionStart=field.selectionStart,selectionEnd=field.selectionEnd;null==value||treatAsString&&"+"==value||(goodLetters=["0","1","2","3","4","5","6","7","8","9"],null!=treatAsString&&treatAsString||goodLetters.push(self.Accelatrix.Globalization.DefaultFormatting.NumberGroupSeparator),(null==precision||10<=precision)&&goodLetters.push(self.Accelatrix.Globalization.DefaultFormatting.NumberDecimalSeparator),allowNegative&&goodLetters.push("-"),goodLetters=value.split("").Intersect(goodLetters).ToList().join(""),isNaN(Number(value))&&(value=goodLetters,field.value=goodLetters),0<goodLetters.indexOf("-")&&(goodLetters=goodLetters.Replace("-","")),value=null==(goodLetters=2<(goodLetters=treatAsString&&0==value.indexOf("+")?"+"+goodLetters:goodLetters).split(self.Accelatrix.Globalization.DefaultFormatting.NumberDecimalSeparator).length?goodLetters.split(self.Accelatrix.Globalization.DefaultFormatting.NumberDecimalSeparator)[0]+self.Accelatrix.Globalization.DefaultFormatting.NumberDecimalSeparator+goodLetters.split(self.Accelatrix.Globalization.DefaultFormatting.NumberDecimalSeparator).Skip(1).ToList().join(""):goodLetters)||0==goodLetters.trim().length?null:self.Accelatrix.Globalization.ParseNumber(goodLetters),null!=precision&&10<=precision&&null!=value&&0!=value&&(goodLetters=self.Accelatrix.Globalization.FormatNumber(value,precision,self.Accelatrix.Globalization.NumberFormatSimplification.None)),field.value!=goodLetters&&(selectionStart>(field.value=goodLetters).length&&(selectionStart=goodLetters.length),selectionEnd>goodLetters.length&&(selectionEnd=goodLetters.length),field.setSelectionRange(selectionStart,selectionEnd)))}function exitHandler(e){var originalValue,didChange,existingValue=(e=e.target).value;if(null!=existingValue)return originalValue=existingValue,didChange=!1,existingValue=e.value.trim().Replace(self.Accelatrix.Globalization.DefaultFormatting.NumberGroupSeparator,"").Replace(self.Accelatrix.Globalization.DefaultFormatting.NumberDecimalSeparator,"."),existingValue=treatAsString?existingValue:self.Accelatrix.Globalization.FormatNumber(Number(existingValue),precision),(existingValue=null==allowNegative||allowNegative?existingValue:existingValue.replace("-",""))!=originalValue&&0<e.value.trim().length&&e.value!=existingValue&&(null==treatAsString||!treatAsString)&&(e.value=existingValue,didChange=!0),existingValue==originalValue||!treatAsString||0!=precision&&1!=precision||(e.value=e.value.Replace(self.Accelatrix.Globalization.DefaultFormatting.NumberGroupSeparator,""),didChange=!0),didChange}input.addEventListener("keydown",interactionHandler,!0),input.addEventListener("paste",function(e){setTimeout(function(){return CleanseUnwantedCharacters()},1)},!0),input.addEventListener("drop",interactionHandler,!0),input.addEventListener("keyup",function(e){0!=e.keyCode&&229!=e.keyCode||setTimeout(function(){return CleanseUnwantedCharacters()},1)},!0),input.addEventListener("focus",function(e){var e=e.target,existingValue=e.value;null==existingValue||0==existingValue.length||existingValue.indexOf(self.Accelatrix.Globalization.DefaultFormatting.NumberGroupSeparator)<0||(existingValue=existingValue.Replace(self.Accelatrix.Globalization.DefaultFormatting.NumberGroupSeparator,""),e.value=existingValue,e.select())});input.addEventListener("blur",function(e){exitHandler(e)&&input.TriggerEvent("change")}),input.addEventListener("change",exitHandler)}function GetAsciiFromEvent(evt){var _to_ascii,shiftUps,c;return null==evt||null==evt.which&&null==evt.keyCode?"":null!=evt.key?"Delete"==evt.key?"":evt.key:null!=evt.keyIdentifier?evt.keyIdentifier.FromUnicode():(shiftUps={96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",39:'"',44:"<",46:">",47:"?"},c=evt.keyCode||evt.which,(_to_ascii={188:"44",109:"45",190:"46",191:"47",192:"96",220:"92",222:"39",221:"93",219:"91",173:"45",187:"61",186:"59",189:"45"}).hasOwnProperty(c)&&(c=_to_ascii[c]),(c=!evt.shiftKey&&65<=c&&c<=90?String.fromCharCode(c+32):evt.shiftKey&&shiftUps.hasOwnProperty(c)?shiftUps[c]:String.fromCharCode(c)).toString())}Layout.TxtDimensions=TxtDimensions,Layout.AutoSize=function(element,isActive){var padding,minWidth,dimensions,bufferWhileTyping;if(null!=element&&("SELECT"==element.tagName||"INPUT"==element.tagName||"TEXTAREA"==element.tagName)&&"hidden"!=element.getAttribute("type")&&"radio"!=element.getAttribute("type")&&"checkbox"!=element.getAttribute("type"))return bufferWhileTyping=null!=isActive&&!isActive||element.hasAttribute("disabled")||element.hasAttribute("readonly")||"SELECT"==element.tagName?0:1.5*Number(getComputedStyle(element).fontSize.replace("px","").replace("pt",""))+1,isActive&&bufferWhileTyping<20&&(bufferWhileTyping=20),isActive="SELECT"!=element.tagName||IsChrome()?4:IsEdge()?8:6,padding=Number(getComputedStyle(element).paddingLeft.replace("px","").replace("pt",""))+Number(getComputedStyle(element).paddingRight.replace("px","").replace("pt","")),minWidth="SELECT"==element.tagName?0:30,bufferWhileTyping=(dimensions=TxtDimensions(element)).Width+bufferWhileTyping+isActive+padding,bufferWhileTyping=Math.round(bufferWhileTyping)<bufferWhileTyping?Math.round(bufferWhileTyping)+1:Math.round(bufferWhileTyping),element.style.width=(bufferWhileTyping=bufferWhileTyping<minWidth?minWidth:bufferWhileTyping)+"px","TEXTAREA"==element.tagName&&(isActive=dimensions.Height+"px",element.style.height=isActive+"px"),element.TriggerEvent("AutoSized"),element},Layout.RestrictToDate=function(input,minimumDate,maximumDate,maskedInput){var keepMaskWhileTyping,hint,updateBackgroundMask;null!=input&&(keepMaskWhileTyping=maskedInput=null==maskedInput||maskedInput,null!=input.placeholder&&""!=input.placeholder||((hint=(hint=0<=(hint=self.Accelatrix.Globalization.DefaultFormatting.ShortDatePattern).indexOf("MMM")?hint.replace("MMM","mm"):hint).indexOf("dd")<0?hint.replace("d","dd"):hint).indexOf("mm")<0&&(hint=hint.replace("m","mm")),input.placeholder=hint,input.Attr("aria-label",hint)),null==input.maxLength&&(input.maxLength=13),input.type="text",input.AddClass("Date"),input.addEventListener("focus",function(){input.hasAttribute("disabled")||(input.select(),0<input.value.trim().length&&maskedInput?keepMaskWhileTyping=!1:maskedInput&&(keepMaskWhileTyping=!0))}),input.addEventListener("blur",hint=function(){keepMaskWhileTyping&&(input.style.backgroundImage=null);var existingValue=(existingValue=input.value).replace(/, /g,",");null!=existingValue&&0!=existingValue.length&&(existingValue=self.Accelatrix.Globalization.ParseDate(existingValue),input.value=(null!=minimumDate&&existingValue.Lesser(minimumDate)?minimumDate:null!=maximumDate&&existingValue.Greater(maximumDate)?maximumDate:existingValue).ToString())}),input.addEventListener("change",hint),updateBackgroundMask=function(newValue,day,month,year){var inputStyle,topPadding,bottomPadding,height,lineHeight,placeholderColor,font,letterSpacing,placeholderStyle,format;keepMaskWhileTyping&&"rtl"!=document.documentElement.getAttribute("dir")&&(inputStyle=getComputedStyle(input),placeholderStyle=getComputedStyle(input,":placeholder-shown"),topPadding=Number(inputStyle["padding-top"].replace("px","")),bottomPadding=Number(inputStyle["padding-top"].replace("px","")),height=Number(inputStyle.height.replace("px","")),lineHeight=""!=placeholderStyle["line-height"]?0<placeholderStyle["line-height"].indexOf("px")?Number(placeholderStyle["line-height"].replace("px","")):Number(placeholderStyle["font-size"].replace("px",""))/.85:0<inputStyle["line-height"].indexOf("px")?Number(inputStyle["line-height"].replace("px","")):Number(inputStyle["font-size"].replace("px",""))/.85,lineHeight=topPadding+Math.floor(.85*lineHeight)+"px",placeholderColor=placeholderStyle.color,placeholderColor=0==inputStyle.color.indexOf("rgb")?inputStyle.color.replace("rgb","rgba").replace(")",", 0.4)"):"rgb(222, 227, 234)",font=(""!=placeholderStyle["font-family"]?placeholderStyle:inputStyle)["font-family"].replace(/\"/g,"").replace(/([A-Z])/g,"$1").trim(),letterSpacing=(""!=placeholderStyle["letter-spacing"]?""!=placeholderStyle["letter-spacing"]?placeholderStyle:inputStyle:(inputStyle["letter-spacing"],inputStyle))["letter-spacing"],placeholderStyle=(""!=placeholderStyle["font-size"]?placeholderStyle:inputStyle)["font-size"],format=self.Accelatrix.Globalization.DefaultFormatting.ShortDatePattern,format=format=(format=(format=0<=(format=decodeURIComponent(encodeURIComponent(format).replace(/%E2%80%8F/g,""))).indexOf("MMM")?format.replace("MMM","mm"):format).indexOf("mm")<0?format.replace("m","mm"):format).indexOf("dd")<0?format.replace("d","dd"):format,format=null==day||0==day.length?format.replace("dd","<tspan fill='"+placeholderColor+"'>dd</tspan>"):1==day.length&&parseInt(day)<4?format.replace("dd","<tspan fill='rgba(255,255,255,0)'>"+day+"</tspan><tspan fill='"+placeholderColor+"'>d</tspan>"):format.replace("dd","<tspan fill='rgba(255,255,255,0)'>"+day+"</tspan>"),format=null==month||0==month.length?format.replace("mm","<tspan fill='"+placeholderColor+"'>mm</tspan>"):1==month.length&&parseInt(month)<2?format.replace("mm","<tspan fill='rgba(255,255,255,0)'>"+month+"</tspan><tspan fill='"+placeholderColor+"'>m</tspan>"):format.replace("mm","<tspan fill='rgba(255,255,255,0)'>"+month+"</tspan>"),format=null==year||0==year.length?format.replace("yyyy","<tspan fill='"+placeholderColor+"'>yyyy</tspan>"):1==year.length?format.replace("yyyy","<tspan fill='rgba(255,255,255,0)'>"+year+"</tspan><tspan fill='"+placeholderColor+"'>yyy</tspan>"):2==year.length?format.replace("yyyy","<tspan fill='rgba(255,255,255,0)'>"+year+"</tspan><tspan fill='"+placeholderColor+"'>yy</tspan>"):3==year.length?format.replace("yyyy","<tspan fill='rgba(255,255,255,0)'>"+year+"</tspan><tspan fill='"+placeholderColor+"'>y</tspan>"):format.replace("yyyy","<tspan fill='rgba(255,255,255,0)'>"+year+"</tspan>"),day="url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='"+(height+topPadding+bottomPadding)+"px' width='"+inputStyle.width+"'><text x='"+inputStyle["padding-left"]+"' y='"+lineHeight+"' fill='"+placeholderColor+"' letter-spacing='"+letterSpacing+"' font-size='"+placeholderStyle+"' font-family='"+font+"'>"+format+'</text></svg>")',input.style.backgroundImage=day,input.style.backgroundRepeat="no-repeat")},input.addEventListener("keypress",function(e){if(13==e.keyCode)input.blur();else{var field=input,value=field.value;if(null!=value){var selectionStart=field.selectionStart,selectionEnd=field.selectionEnd,char=GetAsciiFromEvent(e),shortDatePattern=self.Accelatrix.Globalization.DefaultFormatting.ShortDatePattern;if(8!=e.which&&9!=e.keyCode&&(46!=e.keyCode||"."==e.key)&&37!=e.keyCode&&39!=e.keyCode){var tentativeFinalValue=selectionStart>value.length-1?value+char:0==selectionStart&&0==selectionEnd?char+value:value.substring(0,selectionStart)+char+value.substring(selectionEnd);if(null!=tentativeFinalValue&&0!=tentativeFinalValue.length){var temp=self.Accelatrix.Globalization.DefaultFormatting.ShortDatePattern.toLowerCase(),dayPosition=temp.indexOf("d")<temp.indexOf("m")&&temp.indexOf("d")<temp.indexOf("y")?0:temp.indexOf("d")>temp.indexOf("m")&&temp.indexOf("d")>temp.indexOf("y")?2:1,monthPosition=temp.indexOf("m")<temp.indexOf("d")&&temp.indexOf("m")<temp.indexOf("y")?0:temp.indexOf("m")>temp.indexOf("d")&&temp.indexOf("m")>temp.indexOf("y")?2:1,temp=temp.indexOf("y")<temp.indexOf("d")&&temp.indexOf("y")<temp.indexOf("m")?0:temp.indexOf("y")>temp.indexOf("d")&&temp.indexOf("y")>temp.indexOf("m")?2:1,shortDatePattern=shortDatePattern.split(/(?:d|D|m|M|y|Y)+/).map(function(z){return 0<=z.indexOf(",")||0<=z.indexOf("-")||0<=z.indexOf("\\")||0<=z.indexOf("/")?z.trim():z}).filter(function(z){return 0<z.length}),dateSeparatorsWithoutRtl=shortDatePattern.map(function(z){return decodeURIComponent(encodeURIComponent(z).replace(/%E2%80%8F/g,""))}),dateSeparatorsWithoutRtl=tentativeFinalValue.split(new RegExp("(?:"+dateSeparatorsWithoutRtl.map(function(z){return"\\"+z}).filter(function(z){return 0<z.length}).join("|")+")+","g")).Where(function(z){return null!=z&&0<z.length}).Select(function(z){return decodeURIComponent(encodeURIComponent(z).replace(/%E2%80%8F/g,""))}).ToList(),formatOK=!0,dayCompleteness=(3<dateSeparatorsWithoutRtl.length&&(formatOK=!1),shortDatePattern.ForEach(function(separator,i){0==tentativeFinalValue.indexOf(separator)&&(formatOK=!1),0<=tentativeFinalValue.indexOf(separator+separator)&&(formatOK=!1)}),null),monthCompleteness=null,yearCompleteness=null,textMonthOK=(dayPosition<=dateSeparatorsWithoutRtl.length-1&&0<dateSeparatorsWithoutRtl[dayPosition].length&&(!/^\d+$/.test(dateSeparatorsWithoutRtl[dayPosition])||31<parseInt(dateSeparatorsWithoutRtl[dayPosition])||parseInt(dateSeparatorsWithoutRtl[dayPosition])<0||0==parseInt(dateSeparatorsWithoutRtl[dayPosition])&&1<dateSeparatorsWithoutRtl[dayPosition].length||0<=dateSeparatorsWithoutRtl[dayPosition].toString().indexOf(".")?formatOK=!1:dayCompleteness=dateSeparatorsWithoutRtl[dayPosition]),null);if(monthPosition<=dateSeparatorsWithoutRtl.length-1&&0<dateSeparatorsWithoutRtl[monthPosition].length&&(/^\d+$/.test(dateSeparatorsWithoutRtl[monthPosition])?(12<parseInt(dateSeparatorsWithoutRtl[monthPosition])||parseInt(dateSeparatorsWithoutRtl[monthPosition])<0||0==parseInt(dateSeparatorsWithoutRtl[monthPosition])&&1<dateSeparatorsWithoutRtl[monthPosition].length||0<=dateSeparatorsWithoutRtl[monthPosition].toString().indexOf("."))&&(formatOK=!1):keepMaskWhileTyping||self.Accelatrix.Globalization.DefaultFormatting.AbbreviatedMonthNames.toString().Latinise().toLowerCase().indexOf(dateSeparatorsWithoutRtl[monthPosition].Latinise().toLowerCase())<0?formatOK=!1:textMonthOK=0<=(","+self.Accelatrix.Globalization.DefaultFormatting.AbbreviatedMonthNames.toString().Latinise().toUpperCase()+",").indexOf((","+dateSeparatorsWithoutRtl[monthPosition].toUpperCase()+",").Latinise()),formatOK)&&(monthCompleteness=!0!==textMonthOK?dateSeparatorsWithoutRtl[monthPosition]:null),temp<=dateSeparatorsWithoutRtl.length-1&&0<dateSeparatorsWithoutRtl[temp].length&&(!/^\d+$/.test(dateSeparatorsWithoutRtl[temp])||9999<parseInt(dateSeparatorsWithoutRtl[temp])||parseInt(dateSeparatorsWithoutRtl[temp])<1||0<=dateSeparatorsWithoutRtl[temp].toString().indexOf(".")?formatOK=!1:yearCompleteness=dateSeparatorsWithoutRtl[temp]),!formatOK)return setTimeout(function(){field.value=value,field.setSelectionRange(selectionStart,selectionEnd)},0),e.preventDefault(),!(e.cancelBubble=!0);shortDatePattern=1==shortDatePattern.length||shortDatePattern[0]==shortDatePattern[1]?shortDatePattern[0]:"****";if(selectionStart>value.length-1&&decodeURIComponent(encodeURIComponent(char).replace(/%E2%80%8F/g,""))!=decodeURIComponent(encodeURIComponent(shortDatePattern).replace(/%E2%80%8F/g,""))&&1==decodeURIComponent(encodeURIComponent(shortDatePattern).replace(/%E2%80%8F/g,"")).length){var char=self.Accelatrix.Globalization.ParseDate(tentativeFinalValue),day=dayPosition<=dateSeparatorsWithoutRtl.length-1&&0<dateSeparatorsWithoutRtl[dayPosition].length?char.getDate():-1,char=monthPosition<=dateSeparatorsWithoutRtl.length-1&&0<dateSeparatorsWithoutRtl[monthPosition].length?char.getMonth()+1:-1,year=temp<=dateSeparatorsWithoutRtl.length-1&&0<dateSeparatorsWithoutRtl[temp].length?Number(dateSeparatorsWithoutRtl[temp]):-1,addSeparator=!1;if(0==dayPosition&&(3<Number(day)||null!=dateSeparatorsWithoutRtl[dayPosition]&&2<=dateSeparatorsWithoutRtl[dayPosition].length)&&-1==char&&1==monthPosition&&(addSeparator=!0),0==dayPosition&&(3<Number(day)||null!=dateSeparatorsWithoutRtl[dayPosition]&&2<=dateSeparatorsWithoutRtl[dayPosition].length)&&-1==year&&1==temp&&(addSeparator=!0),0==monthPosition&&(2<=Number(char)||textMonthOK||Number(char)<2&&null!=dateSeparatorsWithoutRtl[monthPosition]&&2<=dateSeparatorsWithoutRtl[monthPosition].length)&&-1==day&&1==dayPosition&&(addSeparator=!0),0==monthPosition&&(2<=Number(char)||textMonthOK||Number(char)<2&&null!=dateSeparatorsWithoutRtl[monthPosition]&&2<=dateSeparatorsWithoutRtl[monthPosition].length)&&-1==year&&1==temp&&(addSeparator=!0),0==temp&&4<=year.toString().length&&-1==day&&1==dayPosition&&(addSeparator=!0),0==temp&&4<=year.toString().length&&-1==char&&1==monthPosition&&(addSeparator=!0),1==dayPosition&&(3<Number(day)||null!=dateSeparatorsWithoutRtl[dayPosition]&&2<=dateSeparatorsWithoutRtl[dayPosition].length)&&-1==char&&2==monthPosition&&(addSeparator=!0),1==dayPosition&&(3<Number(day)||null!=dateSeparatorsWithoutRtl[dayPosition]&&2<=dateSeparatorsWithoutRtl[dayPosition].length)&&-1==year&&2==temp&&(addSeparator=!0),1==monthPosition&&(2<=Number(char)||textMonthOK||Number(char)<2&&null!=dateSeparatorsWithoutRtl[monthPosition]&&2<=dateSeparatorsWithoutRtl[monthPosition].length)&&-1==day&&2==dayPosition&&(addSeparator=!0),1==monthPosition&&(2<=Number(char)||textMonthOK||Number(char)<2&&null!=dateSeparatorsWithoutRtl[monthPosition]&&2<=dateSeparatorsWithoutRtl[monthPosition].length)&&-1==year&&2==temp&&(addSeparator=!0),1==temp&&4<=year.toString().length&&-1==day&&2==dayPosition&&(addSeparator=!0),1==temp&&4<=year.toString().length&&-1==char&&2==monthPosition&&(addSeparator=!0),addSeparator=null==textMonthOK||textMonthOK?addSeparator:!1)return input.value=tentativeFinalValue+shortDatePattern,e.preventDefault(),e.cancelBubble=!0,1<Math.abs(selectionStart-selectionEnd)?input.style.backgroundImage="":updateBackgroundMask(input.value,dayCompleteness,monthCompleteness,yearCompleteness),!1}1<Math.abs(selectionStart-selectionEnd)||selectionEnd<tentativeFinalValue.length-1?input.style.backgroundImage="":updateBackgroundMask(0,dayCompleteness,monthCompleteness,yearCompleteness)}}}}},!0),input.addEventListener("keyup",function(e){var dayPosition,monthPosition,temp,shortDatePattern,dayCompleteness,monthCompleteness,yearCompleteness;"Backspace"!=e.key&&"Delete"!=e.key||(null==(e=input.value)||0==e.trim().length?maskedInput&&(keepMaskWhileTyping=!0,input.style.backgroundImage=""):keepMaskWhileTyping&&(shortDatePattern=self.Accelatrix.Globalization.DefaultFormatting.ShortDatePattern,dayPosition=(temp=self.Accelatrix.Globalization.DefaultFormatting.ShortDatePattern.toLowerCase()).indexOf("d")<temp.indexOf("m")&&temp.indexOf("d")<temp.indexOf("y")?0:temp.indexOf("d")>temp.indexOf("m")&&temp.indexOf("d")>temp.indexOf("y")?2:1,monthPosition=temp.indexOf("m")<temp.indexOf("d")&&temp.indexOf("m")<temp.indexOf("y")?0:temp.indexOf("m")>temp.indexOf("d")&&temp.indexOf("m")>temp.indexOf("y")?2:1,temp=temp.indexOf("y")<temp.indexOf("d")&&temp.indexOf("y")<temp.indexOf("m")?0:temp.indexOf("y")>temp.indexOf("d")&&temp.indexOf("y")>temp.indexOf("m")?2:1,shortDatePattern=shortDatePattern.split(/(?:d|D|m|M|y|Y)+/).map(function(z){return 0<=z.indexOf(",")||0<=z.indexOf("-")||0<=z.indexOf("\\")||0<=z.indexOf("/")?z.trim():z}).filter(function(z){return 0<z.length}),yearCompleteness=monthCompleteness=dayCompleteness=null,dayPosition<=(e=e.split(new RegExp("(?:"+shortDatePattern.map(function(z){return"\\"+z}).filter(function(z){return 0<z.length}).join("|")+")+","g")).Where(function(z){return null!=z&&0<z.length}).ToList()).length-1&&0<e[dayPosition].length&&(!/^\d+$/.test(e[dayPosition])||31<parseInt(e[dayPosition])||parseInt(e[dayPosition])<0||0==parseInt(e[dayPosition])&&1<e[dayPosition].length||0<=e[dayPosition].toString().indexOf(".")||(dayCompleteness=e[dayPosition])),monthPosition<=e.length-1&&0<e[monthPosition].length&&(12<parseInt(e[monthPosition])||parseInt(e[monthPosition])<0||0==parseInt(e[monthPosition])&&1<e[monthPosition].length||0<=e[monthPosition].toString().indexOf(".")||(monthCompleteness=e[monthPosition])),temp<=e.length-1&&0<e[temp].length&&(!/^\d+$/.test(e[temp])||9999<parseInt(e[temp])||parseInt(e[temp])<1||0<=e[temp].toString().indexOf(".")||(yearCompleteness=e[temp])),input.selectionEnd<input.value.length?input.style.backgroundImage="":updateBackgroundMask(input.value,dayCompleteness,monthCompleteness,yearCompleteness)))},!0),input.addEventListener("paste",function(e){null!=input.value&&0<input.value.trim().length&&maskedInput&&(keepMaskWhileTyping=!1,input.style.backgroundImage="")}))},Layout.RestrictToNumber=RestrictToNumber,Layout.RestrictToInteger=function(inputField,allowNegative,allowZero){RestrictToNumber(inputField,0,allowNegative,allowZero),inputField.addEventListener("blur",function(e){var number=inputField.Number();inputField.value=null!=number&&0!=number||null!=allowZero&&allowZero?number.toString():""})},Layout.GetAsciiFromEvent=GetAsciiFromEvent,Layout.RestrictCopyPaste=function(input){function handler1(e){return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!(e.cancelBubble=!0)}input.addEventListener("cut",handler1),input.addEventListener("copy",handler1),input.addEventListener("paste",handler1),input.addEventListener("keydown",function(event){var keyCode=event.keyCode||event.which;if(event.shiftKey&&(45==keyCode||"-"==String.fromCharCode(keyCode)))return event.preventDefault(),event.stopPropagation(),event.stopImmediatePropagation(),!(event.cancelBubble=!0)})},Layout.RestrictToEmail=function(input){var handler;null!=input&&(input.hasAttribute("maxlength")&&input.setAttribute("maxlength","80"),input.addEventListener("keypress",handler=function(e){var evt,value=input.value,selectionStart=input.selectionStart,selectionEnd=input.selectionEnd,char=String.fromCharCode(e.keyCode||e.which);null!=(char="paste"==e.type?evt.clipboardData.getData("text/plain"):char)&&0<char.length&&8!=e.which&&9!=e.keyCode&&(null==(evt=selectionStart>value.length-1?value+char:0==selectionStart&&0==selectionEnd?char+value:value.substring(0,selectionStart)+char+value.substring(selectionEnd))||0==evt.length||(selectionStart=!0,selectionStart=!(0==evt.indexOf(".")||0==evt.indexOf("-")||0==evt.indexOf("@")||0<evt.indexOf("%")||0<evt.indexOf(" ")||0<evt.indexOf("..")||0<evt.indexOf("--")||0<evt.indexOf("@.")||0<evt.indexOf(".@")||0<evt.indexOf("@-")||0<evt.indexOf("-@")||0<evt.indexOf("@_")||2<evt.split("@").length||0<evt.replace(/^[0-9A-Za-z_@.-]+$/g,"").length)&&selectionStart)||(e.preventDefault(),e.cancelBubble=!0))}),input.addEventListener("paste",handler),input.addEventListener("drop",handler))},Layout.IsValidEmail=function(input){return null!=input&&null!=input.value&&0!=input.value.trim().length&&/^\w+([-.]\w+)*@\w+([-.]\w+)*\.\w{2,20}$/.test(input.value)},Layout.BlockUserInteraction=function(scope,sourceElement){null!=scope&&(scope.Find("input, select, text, textarea, a, button, li, span.calendarIcon").Where(function(z){return!z.hasAttribute("disabled")}).ToList().ForEach(function(z){return z.AddClass("InTransit").setAttribute("disabled","")}),null!=(sourceElement=null==(scope=null!=sourceElement&&null!=sourceElement.target?sourceElement:null)?sourceElement:scope.target))&&null!=sourceElement.tagName&&"BUTTON"==sourceElement.tagName&&(sourceElement.removeAttribute("disabled"),sourceElement.AddClass("InTransitSource").RemoveClass("InTransit"),null==scope||sourceElement.HasClass("AuthorizationButton")||(sourceElement.style.backgroundPositionX=scope.offsetX+"px",sourceElement.style.backgroundPositionY=scope.offsetY+"px"))},Layout.UnblockUserInteraction=function(scope){null!=scope&&(scope.Find("input, select, text, textarea, a, button, li, span.calendarIcon").Where(function(z){return z.HasClass("InTransit")}).ForEach(function(z){return z.RemoveClass("InTransit").removeAttribute("disabled")}),scope.Find(".InTransitSource").Take(1).ForEach(function(z){return z.focus()}),scope.Find(".InTransitSource").ForEach(function(z){return z.RemoveClass("InTransitSource")}))},Layout.LazyReact=function(field,callback,minChars){function evaluate(){clearTimeout(timeoutToken);var newValue=field.value.trim();newValue!=oldValue&&((oldValue=newValue).length>=minChars||0==newValue.length)&&callback(newValue)}minChars=null==minChars||minChars<=0?3:minChars;var timeoutToken=null,oldValue="";return field.addEventListener("change",function(){clearTimeout(timeoutToken);var newValue=field.value.trim();newValue!=oldValue&&((oldValue=newValue).length>=minChars||0==newValue.length)&&callback(newValue)}),field.addEventListener("keyup",function(){clearTimeout(timeoutToken),timeoutToken=setTimeout(evaluate,300)}),field.addEventListener("focus",function(){clearTimeout(timeoutToken),oldValue=field.value}),field},Layout.GeneratePalette=function(baseHex,count,darkTheme){function rgbToHex(_a){function clamp(v){return Math.max(0,Math.min(255,Math.round(v)))}var r=_a.r,g=_a.g,_a=_a.b;return"#"+[clamp(r),clamp(g),clamp(_a)].map(function(v){v=v.toString(16);return 1===v.length?"0"+v:v}).join("")}for(var baseHsl=(_a=>{var h,r=_a.r,g=_a.g,b=_a.b,_a=(r/=255,g/=255,b/=255,Math.max(r,g,b)),min=Math.min(r,g,b),l=(_a+min)/2;if(_a===min)h=s=0;else{var d=_a-min,s=.5<l?d/(2-_a-min):d/(_a+min);switch(_a){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;default:h=(r-g)/d+4}h/=6}return{h:360*h,s:100*s,l:100*l}})(3===(baseHex=(baseHex=baseHex=(baseHex=baseHex&&"string"==typeof baseHex?baseHex:"#000000").startsWith("rgb")?(rgb=>(rgb=rgb.match(/\d+/g))?"#"+rgb.map(function(num){num=parseInt(num).toString(16);return 1===num.length?"0"+num:num}).join("").toUpperCase():null)(baseHex):baseHex).replace("#","")).length?{r:parseInt(baseHex[0]+baseHex[0],16),g:parseInt(baseHex[1]+baseHex[1],16),b:parseInt(baseHex[2]+baseHex[2],16)}:{r:parseInt(baseHex.slice(0,2),16),g:parseInt(baseHex.slice(2,4),16),b:parseInt(baseHex.slice(4,6),16)}),satBase=Math.min(92,Math.max(28,baseHsl.s)),baseHex=Math.min(78,Math.max(18,baseHsl.l)),baseL=Math.max(6,Math.min(92,baseHex+(darkTheme?-8:8))),result=[],i=0;i<count;i++){var step=360/Math.max(1,count),sign=i%2==0?1:-1,layer=Math.ceil((i+1)/2),sign=(_a=>{var q,p,hk,v,h=_a.h,s=_a.s,_a=_a.l,h=(h%360+360)%360,s=Math.max(0,Math.min(100,s))/100,_a=Math.max(0,Math.min(100,_a))/100;return 0==s?{r:v=Math.round(255*_a),g:v,b:v}:(p=2*_a-(q=_a<.5?_a*(1+s):_a+s-_a*s),hk=h/360,v=function(n){n=hk+n;return n<0&&(n+=1),1<n&&--n,n<1/6?p+6*(q-p)*n:n<.5?q:n<2/3?p+(q-p)*(2/3-n)*6:p},{r:Math.round(255*v(0)),g:Math.round(255*v(-1/3)),b:Math.round(255*v(1/3))})})({h:(baseHsl.h+sign*step*layer*.9+360)%360,s:Math.max(18,Math.min(98,satBase+6*(i%3-1)+(darkTheme?6:-4))),l:Math.max(6,Math.min(94,baseL+6*(i%4-1.5)-(darkTheme?6:-6)))});result.push(rgbToHex(sign))}return result}})(Layout=Layout||{}),HTMLInputElement.prototype.RestrictToNumber=function(decimals,allowNegative,treatAsString){return Layout.RestrictToNumber(this,decimals,allowNegative,treatAsString),this},HTMLInputElement.prototype.RestrictToInteger=function(allowNegative,allowZero){return Layout.RestrictToInteger(this,allowNegative,allowZero),this},HTMLInputElement.prototype.RestrictToDate=function(minDate,maxDate,maskedInput){return Layout.RestrictToDate(this,minDate,maxDate,maskedInput),this},HTMLInputElement.prototype.Date=function(){var value=this.value;return null==value||0==value.length?null:self.Accelatrix.Globalization.ParseDate(value)},HTMLInputElement.prototype.Number=function(){var value=this.value;return null==value||0==value.length?null:self.Accelatrix.Globalization.ParseNumber(value)},HTMLInputElement.prototype.RestrictCopyPaste=function(){return Layout.RestrictCopyPaste(this),this},HTMLInputElement.prototype.RestrictToEmail=function(){return Layout.RestrictToEmail(this),this},HTMLInputElement.prototype.IsValidEmail=function(){return Layout.IsValidEmail(this)},HTMLInputElement.prototype.AutoSize=function(isActive){return Layout.AutoSize(this,null!=isActive?isActive:this==document.activeElement),this},HTMLSelectElement.prototype.AutoSize=function(isActive){return Layout.AutoSize(this,null!=isActive?isActive:this==document.activeElement),this},HTMLTextAreaElement.prototype.AutoSize=function(isActive){return Layout.AutoSize(this,null!=isActive?isActive:this==document.activeElement),this},HTMLInputElement.prototype.LazyReact=function(callback,minChars){return Layout.LazyReact(this,callback,minChars)},HTMLTextAreaElement.prototype.LazyReact=function(callback,minChars){return Layout.LazyReact(this,callback,minChars)}})(Accelatrix.Ux||(Accelatrix.Ux={}))})(Accelatrix=Accelatrix||{});
var Accelatrix;(Accelatrix=>{var Styles,hasAddedStyles;function MakeSmart(select,elementRenderer){var isMouseDownOnDropdown,isSelectedValue,previousValue,getMembers,members,input,id_1,dropDown,createDropDown,hideDropDown,showDropDown,filterMembers,selectValue,repositionDropDown,style;return hasAddedStyles||(hasAddedStyles=!0,null!=document&&null!=document.querySelector("style[data-smartselect]"))||((style=document.createElement("style")).setAttribute("data-smartselect",""),style.innerHTML=Styles,style.PrependTo(document.head)),null==select||"SELECT"!=select.tagName||select.HasClass("SmartSelect")||(elementRenderer=null!=elementRenderer?elementRenderer:function(member,searchTerm){return document.createElement("a").Html(null==searchTerm||0==searchTerm.trim().length||member.Text.toLowerCase().Latinise().indexOf(searchTerm.toLowerCase().Latinise())<0?null==member.Text||0==member.Text.length?"&nbsp;":member.Text:member.Text.substring(0,member.Text.toLowerCase().Latinise().indexOf(searchTerm.toLowerCase().Latinise()))+"<span>"+member.Text.substring(member.Text.toLowerCase().Latinise().indexOf(searchTerm.toLowerCase().Latinise()),member.Text.toLowerCase().Latinise().indexOf(searchTerm.toLowerCase().Latinise())+searchTerm.length)+"</span>"+member.Text.substring(member.Text.toLowerCase().Latinise().indexOf(searchTerm.toLowerCase().Latinise())+searchTerm.length,member.Text.length))},isSelectedValue=isMouseDownOnDropdown=!1,previousValue=null,members=(getMembers=function(){return select.Find("option").Select(function(z){return{Value:z.getAttribute("value"),Text:z.innerText.trim()}}).Select(function(z){return{Value:z.Value,Text:z.Text,Selected:z.Value==select.value,Key:null==z.Value?"":z.Value.toLowerCase().Latinise(),Text2:null==z.Text?"":z.Text.toLowerCase().Latinise()}}).ToList()})(),(input=document.createElement("input").Attr("type","text").Attr("autocomplete","off").Attr("aria-autocomplete","both").Attr("aria-haspopup","false").Attr("autocapitalize","off").Attr("autocorrect","off").Attr("role","combobox").Attr("spellcheck","false")).value=members.Where(function(z){return z.Selected}).Select(function(z){return z.Text}).Concat([""]).FirstOrNull(),select.GetAttributeNames().ForEach(function(z){return input.Attr(z,select.getAttribute(z))}),null!=input.getAttribute("maxlength")&&input.Attr("maxlength",members.Select(function(z){return z.Text.length}).Max().toString()),select.style.display="none",null!=input.getAttribute("name")&&input.Attr("name",input.getAttribute("name").Replace("Country","C0untry").Replace("country","c0untry")+"Smart"),null!=input.getAttribute("id")&&(id_1=input.getAttribute("id"),input.Attr("id",id_1+"Smart"),select.Parents().Take(2).Select(function(z){return z.Find("[for='"+id_1+"']").FirstOrNull()}).Where(function(z){return null!=z}).ForEach(function(z){return z.Attr("for",id_1+"Smart")})),input.AddClass("SmartSelect").InsertBefore(select),select.AddClass("SmartSelect"),new MutationObserver(function(mutations){for(var newMembers,newOptions=!1,_i=0,mutations_1=mutations;_i<mutations_1.length;_i++)"childList"===mutations_1[_i].type&&(newOptions=!0);newOptions&&(newMembers=getMembers(),members.Where(function(z){return z.Selected}).Select(function(z){return newMembers.Where(function(w){return w.Value==z.Value}).FirstOrNull()}).Where(function(z){return null!=z}).ForEach(function(z){return z.Selected=!0}),members=newMembers,document.activeElement==input)&&input.focus()}).observe(select,{childList:!0}),select.ListenToEvent("change","MakeSmart",function(){var value=select.value;(""!=value&&null!=value||""!=input.value&&null!=input.value)&&value!=members.Where(function(z){return z.Selected}).Select(function(z){return z.Value}).FirstOrNull()&&(members.ForEach(function(z){return z.Selected=z.Value==value,!0}),input.value=members.Where(function(z){return z.Selected}).Select(function(z){return z.Text}).Concat([""]).FirstOrNull())}),select.Parents().ForEach(function(z){z.ListenToEvent("scroll","MakeSmart",function(){repositionDropDown(),setTimeout(repositionDropDown,100),setTimeout(repositionDropDown,250),setTimeout(repositionDropDown,500)}),z.ListenToEvent("resize","MakeSmart",function(){repositionDropDown(),setTimeout(repositionDropDown,100),setTimeout(repositionDropDown,250),setTimeout(repositionDropDown,500)})}),window.addEventListener("scroll",function(e){repositionDropDown(),setTimeout(repositionDropDown,100),setTimeout(repositionDropDown,250),setTimeout(repositionDropDown,500)}.bind(this)),window.addEventListener("resize",function(e){repositionDropDown(),setTimeout(repositionDropDown,100),setTimeout(repositionDropDown,250),setTimeout(repositionDropDown,500)}.bind(this)),dropDown=null,createDropDown=function(){var zIndex;null!=dropDown&&dropDown.HasClass("SmartSelectSearch")||(dropDown=document.createElement("ol").AddClass("SmartSelectSearch").Css("box-sizing","border-box").Css("min-width",input.OuterWidth()+"px").Attr("aria-hidden","true").Attr("tabindex","-1").PrependTo(document.body),zIndex=input.Parents().Concat([input]).Where(function(z){z=getComputedStyle(z).position;return null!=z&&("absolute"==z.toLowerCase()||"fixed"==z.toLowerCase()||"sticky"==z.toLowerCase())}).Where(function(z){return null!=getComputedStyle(z).zIndex}).Select(function(z){return Number(getComputedStyle(z).zIndex)}).OrderByDescending(function(z){return z}).ToList(),dropDown.ListenToEvent("mousedown",function(e){return isMouseDownOnDropdown=e.target==e.currentTarget,e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),e.returnValue=!1}),dropDown.Css("zIndex",zIndex.Any()?(zIndex[0]+1).toString():"1"),repositionDropDown())},hideDropDown=function(){isMouseDownOnDropdown=!1,null!=dropDown&&dropDown.RemoveClass("SmartSelectSearchOpen")},showDropDown=function(){createDropDown(),dropDown.Css("min-width",input.OuterWidth()+"px"),dropDown.HasClass("SmartSelectSearchOpen")||(dropDown.AddClass("SmartSelectSearchOpen").scrollTop=0,repositionDropDown())},filterMembers=function(term,displayRest){var myTerm=null==term?"":term.trim().toLowerCase().Latinise(),matches=null==term||0==term.trim().length?members:members.Where(function(z){return z.Key==myTerm}).Concat(members.Where(function(z){return z.Text2==myTerm})).Concat(members.Where(function(z){return 0==z.Text2.indexOf(myTerm)})).Concat(members.Where(function(z){return 0<=z.Text2.trim().indexOf(myTerm)})).Concat(members.Where(function(z){return 0==z.Key.indexOf(myTerm)})).Distinct(function(a,b){return a.Key==b.Key}).Take(members.length).ToList(),selected=matches.Where(function(z){return z.Selected}).ToList(),selected=(selected.Any()&&(matches=selected.Concat(matches.Where(function(z){return!z.Selected})).ToList()),null!=displayRest&&1==displayRest&&(matches=matches.Concat(members).Distinct(function(a,b){return a.Key==b.Key}).Take(members.length+1).ToList()),select.TriggerEvent("Filter",{Matches:matches})),displayRest=(matches=null!=selected.result&&selected.isDefaultPrevented?selected.result:matches).Any()&&0==matches[0].Text2.indexOf(myTerm);return null!=dropDown&&(dropDown.parentElement.removeChild(dropDown),dropDown.Empty(),matches.Take(300).Select(function(z,i){return document.createElement("li").Attr("value",z.Value).AddClass(z.Selected?"Selected":"").AddClass(null==z.Text||0==z.Text.trim().length?"Empty":"").Append(elementRenderer(z,term)).ListenToEvent("select",function(){return selectValue(z.Value)}).ListenToEvent("mousedown",function(e){dropDown.Find(".Selected").ForEach(function(w){return w.RemoveClass("Selected")}),dropDown.Find(".Hover").ForEach(function(w){return w.RemoveClass("Hover")}),e.target.parentElement.AddClass("Selected"),selectValue(z.Value),input.select()})}).ForEach(function(z){return z.AppendTo(dropDown)}),dropDown.PrependTo(document.body)),matches.Any()||hideDropDown(),displayRest?matches[0].Text:null},selectValue=function(value){isSelectedValue=!0,members.ForEach(function(z){return z.Selected=z.Value==value,!0}),members.Where(function(z){return z.Value==value}).ForEach(function(z){z.Selected=!0,input.value=z.Text,previousValue=z.Text}),null!=dropDown&&dropDown.Find("a").Where(function(z){return z.Find("span").Any()}).ForEach(function(z){return z.Html(z.innerText)});var myEvent=document.createEvent("Event");myEvent.initEvent("change",!0,!0),input.dispatchEvent(myEvent),value!=select.value&&(select.value=value,(myEvent=document.createEvent("Event")).initEvent("change",!0,!0),select.dispatchEvent(myEvent))},repositionDropDown=function(){var element,inputPosition;null!=dropDown&&dropDown.HasClass("SmartSelectSearchOpen")&&(element={width:(element=input).OuterWidth(),height:element.OuterHeight()},inputPosition=(element=>{var isRelativeBody="relative"===window.getComputedStyle(document.body).position,offsetTop=0,currentElement=element;if(isRelativeBody){for(;currentElement&&!isNaN(currentElement.offsetTop);)offsetTop+=currentElement.offsetTop,currentElement=currentElement.offsetParent;for(currentElement=element;currentElement&&!isNaN(currentElement.scrollTop);)offsetTop-=currentElement.scrollTop,currentElement=currentElement.parentElement;return{top:offsetTop,left:element.getBoundingClientRect().left+window.scrollX}}return{top:(isRelativeBody=element.getBoundingClientRect()).top+window.scrollY,left:isRelativeBody.left+window.scrollX}})(input),dropDown.Css("top",inputPosition.top+element.height+"px"),dropDown.Css("left",inputPosition.left+"px"))},input.ListenToEvent("mousedown","MakeSmart",function(){var selected;input.hasAttribute("readonly")||(input!==document.activeElement?isSelectedValue=!1:null==dropDown||dropDown.HasClass("SmartSelectSearchOpen")||(showDropDown(),selected=members.Where(function(z){return z.Selected}).FirstOrNull(),filterMembers(null==selected?null:selected.Value,!0),input.value=null==selected?"":selected.Text,setTimeout(function(){return input.select()},0)))}),input.ListenToEvent("focus","MakeSmart",function(){var selected;input.hasAttribute("readonly")||(isSelectedValue||showDropDown(),isSelectedValue=!1,selected=members.Where(function(z){return z.Selected}).FirstOrNull(),filterMembers(null==selected?null:selected.Value,!0),input.value=null==selected?"":selected.Text,setTimeout(function(){return input.select()},0))}),input.ListenToEvent("focusout","MakeSmart",function(e){var empty;isMouseDownOnDropdown||(hideDropDown(),null!=(empty=null==dropDown?[dropDown]:dropDown.Find(".Empty"))&&1==empty.length&&""==input.value?empty[0].TriggerEvent("select"):null!=(empty=null!=(empty=null==dropDown?null:dropDown.Find(".Hover a").FirstOrNull())?dropDown.Find("li a").Where(function(z){return z.innerText.toLowerCase().Latinise()==input.value.toLowerCase().Latinise()}).FirstOrNull():empty)?empty.TriggerEvent("select"):input.value=members.Where(function(z){return z.Selected}).Select(function(z){return z.Text}).Concat([""]).FirstOrNull())}),input.ListenToEvent("change","MakeSmart",function(e){hideDropDown()}),input.ListenToEvent("keydown","MakeSmart",function(e){var dropDownVisible_1;if(!input.hasAttribute("readonly"))if(9!=e.keyCode&&0,13==e.keyCode)e.stopPropagation(),e.preventDefault(),e.returnValue=!1,selectedItem=null==dropDown?null:dropDown.Find(".Hover a").FirstOrNull(),dropDownVisible_1=null!=dropDown&&dropDown.HasClass("SmartSelectSearchOpen"),null!=(selectedItem=null!=selectedItem||null==dropDown||1!=dropDown.Find("li").ToList().length&&dropDown.Find("li a").Select(function(w){return w.innerText.toLowerCase().Latinise()}).FirstOrNull()!=input.value.toLowerCase().Latinise()?selectedItem:dropDown.Find("li a").FirstOrNull())?(selectedItem.TriggerEvent("mousedown"),input.select()):(dropDownVisible_1?(input.value=members.Where(function(z){return z.Selected}).Select(function(z){return z.Text}).Concat([""]).FirstOrNull(),input.select(),hideDropDown):showDropDown)();else{if(38==e.keyCode||40==e.keyCode)return e.stopPropagation(),e.preventDefault(),e.returnValue=!1,selectedItem=null!=dropDown&&dropDown.HasClass("SmartSelectSearchOpen"),showDropDown(),null==(dropDownVisible_1=dropDown.Find(".Hover").LastOrNull())?dropDownVisible_1=dropDown.Find(".Selected").LastOrNull():dropDownVisible_1.RemoveClass("Hover"),(dropDownVisible_1=(dropDownVisible_1=selectedItem?38==e.keyCode?null!=dropDownVisible_1&&null!=dropDownVisible_1.previousElementSibling?dropDownVisible_1.previousElementSibling.HasClass("Empty")?null!=dropDownVisible_1.previousElementSibling&&null!=dropDownVisible_1.previousElementSibling.previousElementSibling?dropDownVisible_1.previousElementSibling.previousElementSibling:dropDown.Find("li").LastOrNull():dropDownVisible_1.previousElementSibling:dropDown.Find("li").LastOrNull():null!=dropDownVisible_1&&null!=dropDownVisible_1.nextElementSibling?dropDownVisible_1.nextElementSibling.HasClass("Empty")?null!=dropDownVisible_1.nextElementSibling&&null!=dropDownVisible_1.nextElementSibling.nextElementSibling?dropDownVisible_1.nextElementSibling.nextElementSibling:dropDown.Find("li").FirstOrNull():dropDownVisible_1.nextElementSibling:dropDown.Find("li").FirstOrNull():dropDownVisible_1).HasClass("Empty")?38==e.keyCode?null!=dropDownVisible_1.previousElementSibling?dropDownVisible_1.previousElementSibling:dropDown.Find("li").LastOrNull():null!=dropDownVisible_1.nextElementSibling?dropDownVisible_1.nextElementSibling:dropDownVisible_1.previousElementSibling:dropDownVisible_1).AddClass("Hover"),selectedItem?dropDownVisible_1.offsetTop+dropDownVisible_1.offsetHeight>dropDown.offsetHeight+dropDown.scrollTop?(top=dropDownVisible_1.offsetTop+dropDownVisible_1.offsetHeight-dropDown.offsetHeight,dropDown.scrollTop=top):dropDownVisible_1.offsetTop-dropDown.scrollTop<0&&(top=dropDownVisible_1.offsetTop,dropDown.scrollTop=top):dropDown.scrollTop=dropDownVisible_1.offsetTop,!1;if(null==previousValue&&(previousValue=input.value),8==e.keyCode){var selectedItem=input.selectionStart,top=input.selectionEnd;if(selectedItem!=top&&top==input.value.length)return e.stopPropagation(),e.preventDefault(),e.returnValue=!1,input.value=input.value.substring(0,selectedItem-1),!1}}}),input.ListenToEvent("keyup","MakeSmart",function(e){if(!input.hasAttribute("readonly")&&9!=e.keyCode){if(27==e.keyCode)return input.value=members.Where(function(z){return z.Selected}).Select(function(z){return z.Text}).Concat([""]).FirstOrNull(),input.select(),hideDropDown(),e.stopPropagation(),e.preventDefault(),e.returnValue=!1;var value,match;38!=e.keyCode&&40!=e.keyCode&&(value=input.value)!=previousValue&&(null==(match=filterMembers(value))&&null!=dropDown?(dropDown.Find("li:first-of-type").Any()&&showDropDown(),46==e.keyCode&&0==input.selectionStart?(input.selectionStart=0,input.selectionEnd=0):(input.selectionStart=value.length,input.selectionEnd=value.length)):(showDropDown(),46==e.keyCode&&input.selectionEnd==value.length||(null!=value&&0<value.length&&value.length!=match.length&&(input.value=match,input.selectionStart=value.length,input.selectionEnd=match.length),previousValue=input.value)))}}),input.ListenToEvent("paste","MakeSmart",function(e){setTimeout(function(){var match,value=input.value;value!=previousValue&&(null==(match=filterMembers(previousValue=value))&&null!=dropDown?dropDown.Find("li").Any()&&(showDropDown(),0):(showDropDown(),null!=value&&0<value.length&&value.length!=match.length&&(input.value=match,input.selectionStart=value.length,input.selectionEnd=match.length),previousValue=input.value))},0)}),style=Math.round(1e4*Math.random()).toString(),document.body.ListenToEvent("mousedown","SmartSelect"+style,function(e){null!=dropDown&&e.target==dropDown&&(input.value=members.Where(function(z){return z.Selected}).Select(function(z){return z.Text}).Concat([""]).FirstOrNull(),hideDropDown())}),document.body.ListenToEvent("focusin","SmartSelect"+style,function(e){null==input||null!=dropDown&&null!=e.target&&e.target.isEqualNode(dropDown)||e.target!=input&&e.target!=document.body&&(input.value=members.Where(function(z){return z.Selected}).Select(function(z){return z.Text}).Concat([""]).FirstOrNull(),hideDropDown())})),select}Accelatrix.Ux||(Accelatrix.Ux={}),hasAddedStyles=!(Styles=".SmartSelect\n{\n  float: none !important;\n}\n\n.SmartSelectSearch\n{\n  list-style: none;\n  background: var(--color-full-light, #ffffff);\n  margin: 0px;\n  padding: 0px !important;\n  position: absolute;\n  display: inline-block !important;\n  border: 1px solid var(--color-primary, #007dc3);\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  border-radius: 4px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  -ms-overflow-style: -ms-autohiding-scrollbar !important;\n  opacity: 0;\n  max-height: 0px;\n  white-space: normal;\n  transition: 0.3s ease-in-out;\n  transition-property: opacity, height, max-height;\n}\n\n.SmartSelectSearch li\n{\n  cursor: pointer;\n  display: list-item !important;\n  margin: 0px !important;\n  padding: 0px !important;\n  text-align: left !important;\n  white-space: nowrap;\n  font-family: sans-serif;\n}\n\n.SmartSelectSearch li a\n{\n  display: list-item !important;\n  font-size: 12.5px !important;\n  padding: 12px !important;\n  padding-bottom: 6px !important;\n  padding-top: 6px !important;\n  font-weight: normal !important;\n  text-transform: none;\n  cursor: pointer;\n  white-space: nowrap;\n}\n\n.SmartSelectSearch .Empty\n{\n  display: none !important;\n}\n\n.SmartSelectSearch li a span\n{\n  font-weight: bold;\n  color: var(--color-full-dark, #000000);\n}\n\n.SmartSelectSearch li.Selected a\n{ \n  background: var(--color-primary, #007dc3);\n  color: var(--color-full-light, #ffffff);\n}\n\n.SmartSelectSearch li:hover a,\n.SmartSelectSearch .Hover a\n{\n  background: var(--color-secondary, #009CF2);\n  color: var(--color-full-light, #ffffff);\n}\n\n.SmartSelectSearch.SmartSelectSearchOpen\n{\n  opacity: 1;\n  max-height: 177px;\n  z-index: 1;\n}\n\n@media (prefers-color-scheme: dark)\n{\n    .SmartSelectSearch li.Selected a\n    {\n      background: var(--color-primary, #007dc3);\n      color: var(--color-full-dark, #ffffff);\n    }\n\n    .SmartSelectSearch li:hover a,\n    .SmartSelectSearch .Hover a\n    {\n      background: var(--color-secondary, #009CF2);\n      color: var(--color-full-dark, #ffffff);\n    }\n\n    .SmartSelectSearch\n    {\n        list-style: none;\n        background: var(--color-primary-light, #1F1F1F);\n    }\n}\n\nhtml.Dark .SmartSelectSearch li.Selected a\n{\n  background: var(--color-primary, #007dc3);\n  color: var(--color-full-dark, #ffffff);\n}\n\nhtml.Dark .SmartSelectSearch li:hover a,\nhtml.Dark .SmartSelectSearch .Hover a\n{\n  background: var(--color-secondary, #009CF2);\n  color: var(--color-full-dark, #ffffff);\n}\n\nhtml.Dark .SmartSelectSearch\n{\n    list-style: none;\n    background: var(--color-primary-light, #B3B3B3);\n}"),HTMLSelectElement.prototype.MakeSmart=function(elementRenderer){return MakeSmart(this,elementRenderer)}})(Accelatrix=Accelatrix||{});
var Accelatrix;(Accelatrix=>{(Ux=>{(SmartBalloon=>{var Position,Behavior,TargetMode,SmartBalloonControl;(Position=>{Position[Position.Left=0]="Left",Position[Position.Bottom=1]="Bottom",Position[Position.Right=2]="Right",Position[Position.Top=3]="Top",Position[Position.CenterLeft=4]="CenterLeft",Position[Position.CenterBottom=5]="CenterBottom",Position[Position.CenterRight=6]="CenterRight",Position[Position.CenterTop=7]="CenterTop"})(Position=SmartBalloon.Position||(SmartBalloon.Position={})),(Behavior=>{Behavior[Behavior.Normal=0]="Normal",Behavior[Behavior.Sticky=1]="Sticky",Behavior[Behavior.Picky=2]="Picky"})(Behavior=SmartBalloon.Behavior||(SmartBalloon.Behavior={})),(TargetMode=>{TargetMode[TargetMode.Element=0]="Element",TargetMode[TargetMode.Before=1]="Before",TargetMode[TargetMode.After=2]="After"})(TargetMode=SmartBalloon.TargetMode||(SmartBalloon.TargetMode={})),SmartBalloon.Show=function(target,contents,position,behavior,targetMode,event,hideAfter){return SmartBalloonControl.Show(target,contents,position,behavior,targetMode,event,hideAfter)},SmartBalloon.Hide=function(target){SmartBalloonControl.Hide(target)},SmartBalloon.HideAll=function(){SmartBalloonControl.HideAll()},SmartBalloon.RemoveAll=function(){SmartBalloonControl.RemoveAll()},(SmartBalloonControl=>{var hasAddedStyles=!1;function Show(target,contents,position,behavior,targetMode,event,hideAfter){if(null==target)return null;var element=null!=target.style?target:target.target,balloon=(event=null!=event?event:null==target.style?target:null,null==behavior&&(behavior=Behavior.Normal),null==targetMode&&(targetMode=TargetMode.Element),null==hideAfter&&(hideAfter=0),hasAddedStyles||(hasAddedStyles=!0,null!=document&&null!=document.querySelector("style[data-smartballoon]"))||((target=document.createElement("style")).setAttribute("data-smartballoon",""),target.innerHTML=Styling,target.PrependTo(document.head)),GetBalloon(element));if(null==balloon&&(balloon=((element,contents,behavior,targetMode,event)=>{var computedStyle,id=(new Date).getTime();element.setAttribute("data-smartballoon","SmartBalloon"+id),(id=document.createElement("div").Attr("id","SmartBalloon"+id).AddClass("SmartBalloon").Append(document.createElement("div").AddClass("SmartBalloonContents"))).PrependTo(document.body),null!=contents&&(container=id.firstElementChild,contents="String"==contents.GetType().Name?document.createElement("span").Html(contents):contents,container.append(contents),computedStyle=getComputedStyle(contents),width=null!=computedStyle["min-width"]&&""!=computedStyle["min-width"]&&"0px"!=computedStyle["min-width"]?Number(computedStyle["min-width"].replace("px","")):contents.offsetWidth,computedStyle=null!=computedStyle["min-height"]&&""!=computedStyle["min-height"]&&"0px"!=computedStyle["min-height"]?Number(computedStyle["min-height"].replace("px","")):contents.offsetHeight,contents.style.minWidth="",contents.style.width=width+"px",container.Css("min-width",width+"px"),container.Css("min-height",computedStyle+"px"));var width=null==(contents=getComputedStyle(id.firstElementChild).borderRadius)||0==contents.length?0:Number(contents.replace("px","")),container=(id.data={width:id.OuterWidth(),height:id.OuterHeight(),corner:width},document.createElement("div").AddClass("SmartBalloonTip").AppendTo(id),document.createElement("div").AddClass("SmartBalloonTip").AddClass("SmartBalloonTipInner").AppendTo(id),id.data.Mode=behavior,id.data.TargetMode=targetMode,id.data.HideTimer=null,id.data.EventPosition=null==event?null:{Left:event.pageX,Top:event.pageY},element.Parents().Where(function(z){z=getComputedStyle(z).position;return null!=z&&("absolute"==z.toLowerCase()||"fixed"==z.toLowerCase()||"sticky"==z.toLowerCase())}).Where(function(z){return null!=getComputedStyle(z).zIndex}).Select(function(z){return Number(getComputedStyle(z).zIndex)}).OrderByDescending().ToList());return 0<container.length&&id.Css("zIndex",getComputedStyle(id).zIndex+container),id})(element,contents,behavior,targetMode,event)),"Number"==(position=null==position?null==document.querySelector("html[dir='rtl']")?[Position.Right,Position.Left,Position.Bottom,Position.Top]:[Position.Left,Position.Right,Position.Bottom,Position.Top]:position).GetType().Name)switch(position){case Position.Left:position=[Position.Left,Position.Right,Position.Bottom,Position.Top];break;case Position.Bottom:position=[Position.Bottom,Position.Top,Position.Right,Position.Left];break;case Position.Right:position=[Position.Right,Position.Left,Position.Bottom,Position.Top];break;case Position.Top:position=[Position.Top,Position.Bottom,Position.Right,Position.Left];break;case Position.CenterLeft:position=[Position.CenterLeft,Position.CenterRight,Position.CenterBottom,Position.CenterTop];break;case Position.CenterBottom:position=[Position.CenterBottom,Position.CenterTop,Position.CenterRight,Position.CenterLeft];break;case Position.CenterRight:position=[Position.CenterRight,Position.CenterLeft,Position.CenterBottom,Position.CenterTop];break;case Position.CenterTop:position=[Position.CenterTop,Position.CenterBottom,Position.CenterRight,Position.CenterLeft]}return balloon.data.Mode=behavior,balloon.data.TargetMode=targetMode,balloon.data.EventPosition=null==event?null:{Left:event.pageX,Top:event.pageY},((balloon,contents)=>{var where;null!=contents?(where=balloon.firstElementChild.Empty(),"String"==contents.GetType().Name?where.Html(contents):contents.AppendTo(where),balloon.data.width=balloon.OuterWidth(),balloon.data.height=balloon.OuterHeight()):balloon.RemoveClass("SmartBalloonOn")})(balloon,contents),((element,balloon,position)=>{var targetMode=balloon.data.TargetMode,elementPosition=GetPosition(element,targetMode),targetMode=GetDimensions(element,targetMode),balloonDimensions_Width=balloon.data.width,balloonDimensions_Height=balloon.data.height,bodyDimensions="relative"==getComputedStyle(document.body).position?{Width:document.body.offsetWidth,Height:document.body.lastElementChild.Offset().Top+document.body.lastElementChild.OuterHeight()}:{Width:document.body.offsetWidth,Height:document.body.offsetHeight},eventPosition=(null!=(eventPosition=null==balloon.data.EventPosition?null:balloon.data.EventPosition)&&(elementPosition.Left=eventPosition.Left,elementPosition.Top=eventPosition.Top,targetMode.Width=1,targetMode.Height=1),GetScrollOffset(element)),whereFits=(bodyDimensions.Width=window.innerWidth,bodyDimensions.Height=window.innerHeight,elementPosition.Left+=eventPosition.Left,elementPosition.Top+=eventPosition.Top,[]);elementPosition.Left+targetMode.Width+balloonDimensions_Width<=bodyDimensions.Width&&whereFits.push(Position.Right),0<=elementPosition.Top-balloonDimensions_Height&&whereFits.push(Position.Top),0<=elementPosition.Left-balloonDimensions_Width&&whereFits.push(Position.Left),elementPosition.Top+targetMode.Height+balloonDimensions_Height<=bodyDimensions.Height&&whereFits.push(Position.Bottom),elementPosition.Left+targetMode.Width/2+balloonDimensions_Width<=bodyDimensions.Width&&whereFits.push(Position.CenterRight),0<=elementPosition.Top+targetMode.Height/2-balloonDimensions_Height&&whereFits.push(Position.CenterTop),0<=elementPosition.Left+targetMode.Width/2-balloonDimensions_Width&&whereFits.push(Position.CenterLeft),elementPosition.Top+targetMode.Height/2+balloonDimensions_Height<=bodyDimensions.Height&&whereFits.push(Position.CenterBottom),eventPosition=position.Where(function(z){return whereFits.Where(function(x){return x==z}).Any()}).ToList(),balloonDimensions_Width=0==eventPosition.length?Position.Bottom:eventPosition[0],balloon.data.positioning=balloonDimensions_Width,balloon.RemoveClass("SmartBalloonPositionLeft").RemoveClass("SmartBalloonPositionRight").RemoveClass("SmartBalloonPositionTop").RemoveClass("SmartBalloonPositionBottom").AddClass("SmartBalloonPosition"+(balloonDimensions_Width==Position.Left?"Left":balloonDimensions_Width==Position.Right?"Right":balloonDimensions_Width==Position.Top?"Top":"Bottom")),balloon.Css("padding","0px").Css(balloonDimensions_Width==Position.Left||balloonDimensions_Width==Position.CenterLeft?"padding-right":balloonDimensions_Width==Position.Bottom||balloonDimensions_Width==Position.CenterBottom?"padding-top":balloonDimensions_Width==Position.Right||balloonDimensions_Width==Position.CenterRight?"padding-left":"padding-bottom",TipSize+"px"),balloon.data.width=balloon.OuterWidth(),balloon.data.height=balloon.OuterHeight(),RepositionBalloon(element,balloon)})(element,balloon,position),balloon.data.IsReceptive&&(balloon.data.IsReceptive=!1,setTimeout(function(){return balloon.data.IsReceptive=!0},150)),balloon.HasClass("SmartBalloonOff")&&balloon.RemoveClass("SmartBalloonOff"),balloon.HasClass("SmartBalloonOn")||(balloon.AddClass("SmartBalloonOn"),RepositionEvents(element,balloon,!0)),1<hideAfter&&setTimeout(function(){return Hide(element)},hideAfter),setTimeout(function(){return RepositionBalloon(element,balloon)},1),balloon}function GetBalloon(element){element=null!=element&&element.hasAttribute("data-smartballoon")?element.getAttribute("data-smartballoon"):null;return null==element||0==element.length?null:document.getElementById(element)}function RepositionBalloon(element,balloon){if(null!=element){var targetMode=balloon.data.TargetMode,elementPosition=GetPosition(element,targetMode);if(0==elementPosition.Left&&0==elementPosition.Top)Hide(element),balloon.style.display="none";else{balloon.data.width=balloon.OuterWidth(),balloon.data.height=balloon.OuterHeight();var elementDimensions=GetDimensions(element,targetMode),balloonDimensions_Width=balloon.data.width,balloonDimensions_Height=balloon.data.height,targetMode="relative"==getComputedStyle(document.body).position?{Width:document.body.offsetWidth,height:document.body.lastElementChild.Offset().Top+document.body.lastElementChild.OuterHeight()}:{Width:document.body.offsetWidth,Height:document.body.offsetHeight},balloonPositioning=balloon.data.positioning,eventPosition=null==balloon.data.EventPosition?null:balloon.data.EventPosition,balloonPosition=(null!=eventPosition&&(elementPosition.Left=eventPosition.Left,elementPosition.Top=eventPosition.Top,elementDimensions.Width=1,elementDimensions.Height=1,balloonPositioning=balloonPositioning==Position.CenterTop?Position.Top:balloonPositioning==Position.CenterBottom?Position.Bottom:balloonPositioning==Position.CenterRight?Position.Right:balloonPositioning==Position.CenterLeft?Position.Left:balloonPositioning),{Left:0,Top:0});switch(balloonPositioning){case Position.Left:if(balloonPosition.Left=elementPosition.Left-balloonDimensions_Width,balloonPosition.Top=elementPosition.Top+elementDimensions.Height/2-balloonDimensions_Height/2,balloonPosition.Left<0)return balloon.data.positioning=Position.Right,void RepositionBalloon(element,balloon);break;case Position.Bottom:balloonPosition.Left=elementPosition.Left+elementDimensions.Width/2-balloonDimensions_Width/2,balloonPosition.Top=elementPosition.Top+elementDimensions.Height;break;case Position.Right:balloonPosition.Left=elementPosition.Left+elementDimensions.Width,balloonPosition.Top=elementPosition.Top+elementDimensions.Height/2-balloonDimensions_Height/2;break;case Position.Top:if(balloonPosition.Left=elementPosition.Left+elementDimensions.Width/2-balloonDimensions_Width/2,balloonPosition.Top=elementPosition.Top-balloonDimensions_Height,balloonPosition.Top<0)return balloon.data.positioning=Position.Bottom,void RepositionBalloon(element,balloon);break;case Position.CenterLeft:if(balloonPosition.Left=elementPosition.Left-balloonDimensions_Width+elementDimensions.Width/2,balloonPosition.Top=elementPosition.Top+elementDimensions.Height/2-balloonDimensions_Height/2,balloonPosition.Left<0)return balloon.data.positioning=Position.CenterRight,void RepositionBalloon(element,balloon);break;case Position.CenterBottom:balloonPosition.Left=elementPosition.Left+elementDimensions.Width/2-balloonDimensions_Width/2,balloonPosition.Top=elementPosition.Top+elementDimensions.Height-elementDimensions.Height/2;break;case Position.CenterRight:balloonPosition.Left=elementPosition.Left+elementDimensions.Width-elementDimensions.Width/2,balloonPosition.Top=elementPosition.Top+elementDimensions.Height/2-balloonDimensions_Height/2;break;case Position.CenterTop:if(balloonPosition.Left=elementPosition.Left+elementDimensions.Width/2-balloonDimensions_Width/2,balloonPosition.Top=elementPosition.Top-balloonDimensions_Height+elementDimensions.Height/2,balloonPosition.Top<0)return balloon.data.positioning=Position.CenterBottom,void RepositionBalloon(element,balloon)}var eventPosition=0,topSkew=0;balloonPosition.Top<0&&(balloonPositioning==Position.Left||balloonPositioning==Position.Right||balloonPositioning==Position.CenterLeft||balloonPositioning==Position.CenterRight)&&(topSkew=balloonPosition.Top,balloonPosition.Top=0),targetMode.height<balloonPosition.Top+balloonDimensions_Height&&(balloonPositioning==Position.Left||balloonPositioning==Position.Right||balloonPositioning==Position.CenterLeft||balloonPositioning==Position.CenterRight)&&(topSkew=balloonPosition.Top+balloonDimensions_Height-targetMode.height,balloonPosition.Top=targetMode.height-balloonDimensions_Height),balloonPosition.Left<0&&(balloonPositioning==Position.Top||balloonPositioning==Position.Bottom||balloonPositioning==Position.CenterTop||balloonPositioning==Position.CenterBottom)&&(eventPosition=balloonPosition.Left,balloonPosition.Left=0),targetMode.Width<balloonPosition.Left+balloonDimensions_Width&&(balloonPositioning==Position.Top||balloonPositioning==Position.Bottom||balloonPositioning==Position.CenterBottom||balloonPositioning==Position.CenterTop)&&(eventPosition=balloonPosition.Left+balloonDimensions_Width-targetMode.Width,balloonPosition.Left=targetMode.Width-balloonDimensions_Width),balloon.Css("left",balloonPosition.Left+"px").Css("top","relative"==getComputedStyle(document.body).position?(balloonPosition.Top+topSkew).toString():balloonPosition.Top+"px"),((balloon,positioning,leftSkew,topSkew)=>{var tip=balloon.Find("> .SmartBalloonTip"),balloonDimensions_Width$0=balloon.data.width,balloonDimensions_Height$0=balloon.data.height,balloonDimensions_Corner=balloon.data.corner;switch(positioning==Position.CenterLeft?Position.Left:positioning==Position.CenterTop?Position.Top:positioning==Position.CenterRight?Position.Right:positioning==Position.CenterBottom?Position.Bottom:positioning){case Position.Left:tip.ForEach(function(z){return z.Css("left","auto").Css("bottom","auto").Css("right","auto").Css("top","auto").Css("margin","0px").Css("right","0px").Css("top","relative"==getComputedStyle(document.body).position?balloonDimensions_Height$0/2-TipSize/2+"px":balloonDimensions_Height$0/2+topSkew-TipSize/2+"px").Css("transform","rotate(90deg)")}),0<balloonDimensions_Corner&&0!=topSkew&&(balloonDimensions_Height$0/2+topSkew-TipSize/2<=balloonDimensions_Corner?tip.ForEach(function(z){return z.Css("margin-top",balloonDimensions_Corner/2+"px")}):balloonDimensions_Height$0/2-balloonDimensions_Corner-TipSize/2<=balloonDimensions_Height$0/2+topSkew-TipSize/2&&tip.ForEach(function(z){return z.Css("margin-top",1-balloonDimensions_Corner+"px")})),balloonDimensions_Height$0/2+topSkew-TipSize/2<balloonDimensions_Corner?tip.ForEach(function(z){return z.Css("margin-top","0px").Css("top",balloonDimensions_Corner+TipSize/2+"px")}):balloonDimensions_Height$0<balloonDimensions_Height$0/2+topSkew-TipSize/2+balloonDimensions_Corner&&tip.ForEach(function(z){return z.Css("margin-top","1px").Css("bottom",balloonDimensions_Corner+TipSize+"px")}),tip.FirstOrNull().Css("margin-right",-TipSize/2+"px"),tip.LastOrNull().Css("margin-right",-TipSize/2+1+"px");break;case Position.Bottom:tip.ForEach(function(z){return z.Css("left","auto").Css("bottom","auto").Css("right","auto").Css("top","auto").Css("margin","0px").Css("left",balloonDimensions_Width$0/2+leftSkew-TipSize+"px").Css("top","0px").Css("transform","rotate(0deg)")}),0<balloonDimensions_Corner&&0!=topSkew&&(balloonDimensions_Width$0/2+leftSkew-TipSize<balloonDimensions_Corner?tip.ForEach(function(z){return z.Css("margin-left",balloonDimensions_Corner+"px")}):balloonDimensions_Width$0/2-balloonDimensions_Corner-TipSize/2<balloonDimensions_Width$0/2+leftSkew-TipSize&&tip.ForEach(function(z){return z.Css("margin-left",-balloonDimensions_Corner+"px")})),balloonDimensions_Width$0/2+leftSkew-TipSize<balloonDimensions_Corner?tip.ForEach(function(z){return z.Css("left",balloonDimensions_Corner+TipSize)}):balloonDimensions_Width$0-balloonDimensions_Corner-TipSize<balloonDimensions_Width$0/2+leftSkew-TipSize&&tip.ForEach(function(z){return z.Css("right",balloonDimensions_Corner+TipSize)}),tip.LastOrNull().Css("margin-top","1px");break;case Position.Right:tip.ForEach(function(z){return z.Css("left","auto").Css("bottom","auto").Css("right","auto").Css("top","auto").Css("margin","0px").Css("left","0px").Css("top","relative"==getComputedStyle(document.body).position?balloonDimensions_Height$0/2-TipSize/2+"px":balloonDimensions_Height$0/2+topSkew-TipSize/2+"px").Css("transform","rotate(270deg)")}),0<balloonDimensions_Corner&&0!=topSkew&&(balloonDimensions_Height$0/2+topSkew-TipSize/2<=balloonDimensions_Corner?tip.ForEach(function(z){return z.Css("margin-top",balloonDimensions_Corner/2+"px")}):balloonDimensions_Height$0/2-balloonDimensions_Corner-TipSize/2<=balloonDimensions_Height$0/2+topSkew-TipSize/2&&tip.ForEach(function(z){return z.Css("margin-top",1-balloonDimensions_Corner+"px")})),balloonDimensions_Height$0/2+topSkew-TipSize/2<balloonDimensions_Corner?tip.ForEach(function(z){return z.Css("margin-top","0px").Css("top",balloonDimensions_Corner+TipSize/2+"px")}):balloonDimensions_Height$0<balloonDimensions_Height$0/2+topSkew-TipSize/2+balloonDimensions_Corner&&tip.ForEach(function(z){return z.Css("margin-top","1px").Css("bottom",balloonDimensions_Corner+TipSize+"px")}),tip.FirstOrNull().Css("margin-left",-TipSize/2+"px"),tip.LastOrNull().Css("margin-left",-TipSize/2+1+"px");break;case Position.Top:tip.ForEach(function(z){return z.Css("left","auto").Css("bottom","auto").Css("right","auto").Css("top","auto").Css("margin","0px").Css("left",balloonDimensions_Width$0/2+leftSkew-TipSize+"px").Css("bottom","0px").Css("transform","rotate(180deg)")}),0<balloonDimensions_Corner&&0!=topSkew&&(balloonDimensions_Width$0/2+leftSkew-TipSize<balloonDimensions_Corner?tip.ForEach(function(z){return z.Css("margin-left",balloonDimensions_Corner+"px")}):balloonDimensions_Width$0/2-balloonDimensions_Corner-TipSize/2<balloonDimensions_Width$0/2+leftSkew-TipSize&&tip.ForEach(function(z){return z.Css("margin-left",-balloonDimensions_Corner+"px")})),balloonDimensions_Width$0/2+leftSkew-TipSize<balloonDimensions_Corner?tip.ForEach(function(z){return z.Css("left",balloonDimensions_Corner+TipSize)}):balloonDimensions_Width$0-balloonDimensions_Corner-TipSize<balloonDimensions_Width$0/2+leftSkew-TipSize&&tip.ForEach(function(z){return z.Css("right",balloonDimensions_Corner+TipSize)}),tip.LastOrNull().Css("margin-bottom","1px")}})(balloon,balloonPositioning,eventPosition,topSkew)}}}function GetPosition(element,targetMode){var dimensions,marginLeft,marginRight,paddingLeft,paddingRight,computedStyle,computedStyle2;return targetMode==TargetMode.Element?"relative"==getComputedStyle(document.body).position?GetScrollOffset(element):element.Offset():(dimensions=GetDimensions(element,targetMode),computedStyle=window.getComputedStyle(element,targetMode==TargetMode.After?":after":":before"),computedStyle2=window.getComputedStyle(element),marginLeft=UnwrapValue(computedStyle.getPropertyValue("margin-left")),marginRight=UnwrapValue(computedStyle.getPropertyValue("margin-right")),paddingLeft=UnwrapValue(computedStyle2.getPropertyValue("padding-left")),paddingRight=UnwrapValue(computedStyle2.getPropertyValue("padding-right")),computedStyle=UnwrapValue(computedStyle.getPropertyValue("margin-top")),computedStyle2=UnwrapValue(computedStyle2.getPropertyValue("padding-top")),null==document.querySelector("html[dir='rtl']")?targetMode==TargetMode.Before?{Left:element.Offset().Left+marginLeft+paddingLeft,Top:computedStyle2+computedStyle+element.Offset().Top}:{Left:paddingRight+element.Offset().Left+element.OuterWidth()+marginRight-dimensions.Width,Top:computedStyle2+computedStyle+element.Offset().Top}:targetMode==TargetMode.Before?{Left:element.OuterWidth()+paddingRight+element.Offset().Left+marginLeft+paddingLeft,Top:computedStyle2+computedStyle+element.Offset().Top}:{Left:-element.OuterWidth()+paddingRight+element.Offset().Left+element.OuterWidth()+marginRight-dimensions.Width,Top:computedStyle2+computedStyle+element.Offset().Top})}function GetScrollOffset(element){for(var offsetTop=0,offsetLeft=0,e=(e=element).offsetParent;null!=e&&!isNaN(e.offsetTop);){var position=window.getComputedStyle(e).position;"absolute"!=position&&"static"!=position&&"relative"!=position&&(offsetTop+=e.offsetTop,offsetLeft+=e.offsetLeft),e=e.offsetParent}for(e=element;null!=e&&!isNaN(e.scrollTop);)offsetTop-=e.scrollTop,offsetLeft-=e.scrollLeft,e=e.parentNode;return{Top:offsetTop,Left:offsetLeft}}function GetDimensions(element,targetMode){return targetMode==TargetMode.Element?{Width:element.OuterWidth(),Height:element.OuterHeight()}:{Width:UnwrapValue((element=window.getComputedStyle(element,targetMode==TargetMode.After?":after":":before")).getPropertyValue("width")),Height:UnwrapValue(element.getPropertyValue("height"))}}function RepositionEvents(element,balloon,isOn){var id=balloon.getAttribute("id"),mode=balloon.data.Mode;if(null==element)null!=(observer=balloon.data.Observer)&&observer.disconnect();else{isOn?element.Parents().Concat([element,window]).ForEach(function(z){z.ListenToEvent("scroll",id,function(){RepositionBalloon(element,balloon),setTimeout(function(){return RepositionBalloon(element,balloon)},500)}),z.ListenToEvent("resize",id,function(){RepositionBalloon(element,balloon),setTimeout(function(){return RepositionBalloon(element,balloon)},500)})}):element.Parents().Concat([element,window]).ForEach(function(z){z.StopEventListening("scroll",id),z.StopEventListening("resize",id)}),isOn?window.ListenToEvent("resize",id,function(){return RepositionBalloon(element,balloon)}):window.StopEventListening("resize",id);var iframeResizer,observer,iframe=balloon.Find("iframe").FirstOrNull();if(null!=iframe&&(isOn?(iframeResizer=function(){var width,doc=null!=iframe.contentDocument?iframe.contentDocument.body:null!=iframe.contentWindow&&null!=iframe.contentWindow.document?iframe.contentWindow.document.body:null;null!=doc&&(width=null==doc.parentElement||doc.parentElement.scrollWidth<doc.scrollWidth?doc.scrollWidth+20:doc.parentElement.scrollWidth,doc=null==doc.parentElement||doc.parentElement.scrollHeight<doc.scrollHeight?doc.scrollHeight+20:doc.parentElement.scrollHeight,0<width&&iframe.Css("width",width+"px"),0<doc&&iframe.Css("height",doc+"px"),RepositionBalloon(element,balloon))},iframe.ListenToEvent("load",id,function(){return setTimeout(iframeResizer,100)}),iframeResizer()):iframe.StopEventListening("load",id)),null==(observer=balloon.data.Observer)){try{observer=new MutationObserver(function(mutations,observer){(mutations.Where(function(z){return"style"!=z.attributeName}).Any()||mutations.Where(function(z){return"style"==z.attributeName}).Where(function(z){return null!=z.target}).Select(function(z){return z.target.style}).Where(function(z){return null!=z}).Select(function(z){return Object.keys(z).Select(function(w){return z[w]}).Where(function(w){return null!=w&&""!=w})}).Where(function(z){return z.Any()}).Any())&&RepositionBalloon(element,balloon)})}catch(e){}balloon.data.Observer=observer}null!=observer&&(isOn?(observer.observe(element,{subtree:!0,attributes:!0,childList:!0}),element.Parents().Where(function(z){return"BODY"!=z.tagName&&"HTML"!=z.tagName}).ForEach(function(z){return observer.observe(z,{subtree:!0,attributes:!0,childList:!0})})):observer.disconnect()),mode!=Behavior.Sticky&&(isOn?(null==balloon.data.IsReceptive&&(balloon.data.IsReceptive=!1,mode=function(event){var ele;3==event.eventPhase&&null!=balloon.data.IsReceptive&&balloon.data.IsReceptive&&(ele=event.target,event.pageX>=balloon.Position().Left&&event.pageX<=balloon.Position().Left+balloon.offsetWidth&&event.pageY>=balloon.Position().Top&&event.pageY<=balloon.Position().Top+balloon.offsetHeight||null!=ele.Closest("#"+id)||ele.getAttribute("data-smartballoon")==id||ele.Parents().Where(function(z){return z.getAttribute("data-smartballoon")==id}).Any()||null!=event.pageX&&null!=event.pageY&&0!=event.pageX&&0!=event.pageY&&Math.round(balloon.Position().Left)<=event.pageX&&Math.round(balloon.Position().Left)+balloon.offsetWidth>=event.pageX&&Math.round(balloon.Position().Top)<=event.pageY&&Math.round(balloon.Position().Top)+balloon.offsetHeight>=event.pageY||(Hide(element),balloon.data.IsReceptive=!1))},document.ListenToEvent("focus",id,mode),document.ListenToEvent("click",id,mode),document.ListenToEvent("mouseup",id,mode),document.ListenToEvent("tap",id,mode),document.ListenToEvent("touchend",id,mode),document.ListenToEvent("mousemove",id,mode)),setTimeout(function(){return balloon.data.IsReceptive=!0},120)):balloon.data.IsReceptive=!1)}}function Hide(target){var element,balloon;null!=target&&null!=(element=target)&&null!=(balloon=GetBalloon(element))&&(null!=(target=balloon.data.HideTimer)&&(balloon.data.HideTimer=null,clearTimeout(target)),balloon.RemoveClass("SmartBalloonOn").AddClass("SmartBalloonOff"),target=setTimeout(function(){balloon.TriggerEvent("BalloonClosed"),element.TriggerEvent("BalloonClosed")},100),balloon.data.HideTimer=target,RepositionEvents(element,balloon,!1))}function HideAll(){var balloons=document.body.Find(".SmartBalloonOn"),hideTimer=(balloons.Select(function(z){return z.data.HideTimeout}).Where(function(z){return null}).ForEach(function(z){return clearTimeout(z)}),balloons.ForEach(function(z){return z.RemoveClass("SmartBalloonOn").AddClass("SmartBalloonOff")}),setTimeout(function(){balloons.ForEach(function(z){return z.TriggerEvent("BalloonClosed")})},100));balloons.ForEach(function(z){return z.data.HideTimeout=hideTimer}),balloons.ForEach(function(z){return RepositionEvents(null,z,!1)})}function UnwrapValue(cssValue){return null==cssValue||0==cssValue.length||"auto"==cssValue||cssValue.indexOf("px")<0?0:Number(cssValue.replace("px",""))}SmartBalloonControl.Show=Show,SmartBalloonControl.Hide=Hide,SmartBalloonControl.HideAll=HideAll,SmartBalloonControl.RemoveAll=function(){var balloons=document.body.Find(".SmartBalloonOn");HideAll(),balloons.ForEach(function(z){return z.parentElement.removeChild(z)})},SmartBalloonControl.Remove=function(element){var balloon;null!=element&&null!=(balloon=GetBalloon(element))&&(balloon.HasClass("SmartBalloonOn")?(Hide(element),setTimeout(function(){return balloon.remove()},500)):RepositionEvents(element,balloon,!1),element.removeAttribute("data-smartballoon"),balloon.remove())},Object.defineProperty(Error.prototype,"Show",{value:function(target,position){var container,msg=String.IsNullOrWhiteSpace(this.Message)?this.message:this.Message,innerMessage=null==this.InnerException||String.IsNullOrWhiteSpace(this.InnerException.Message)?null:this.InnerException.Message;return(null==innerMessage?Show(target,msg,position):(container=document.createElement("div"),document.createElement("label").Text(msg).AppendTo(container),document.createElement("br").AppendTo(container),document.createElement("span").Text(innerMessage).AppendTo(container),Show(target,container,position))).AddClass("Error")},enumerable:!1,configurable:!0});var TipSize=8,Styling=".SmartBalloon{   max-width: initial;   position: absolute;   z-Index: 1000;   padding-left: "+TipSize+"px;   padding-top: "+TipSize+"px;}.SmartBalloonContents{   box-shadow: 1px 1px 9px 0px rgba(0,0,0,0.7);   -webkit-box-shadow:  1px 1px 5px 0px rgba(0,0,0,0.7);   -moz-box-shadow:  1px 1px 5px 0px rgba(0,0,0,0.7);   padding: 5px;   box-sizing: content-box;   border-radius: 4px;   border: solid 1px #777;   color: #666;   background-color: #efefef;   white-space: normal;   -webkit-touch-callout: none;   -webkit-user-select: none;   -html-user-select: none;   -moz-user-select: none;   -ms-user-select: none;   user-select: none;}.SmartBalloonContents > *{   box-sizing: border-box;}.SmartBalloonTip{   width: "+TipSize/.866+"px;   height: "+TipSize+"px;   display: block;   position: absolute;   box-sizing: border-box;   background-color: transparent;   border-bottom: "+TipSize+"px solid #777;   border-right: "+TipSize+"px solid transparent;   border-left: "+TipSize+"px solid transparent;   transform-origin: 50% 50%;}.SmartBalloonTipInner{   border-bottom-color: #efefef;}.SmartBalloonOn{   display: block;  -webkit-animation: SmartBalloonFadeIn 0.25s ease-in forwards;  -moz-animation: SmartBalloonFadeIn 0.25s ease-in forwards;  animation: SmartBalloonFadeIn 0.25s ease-in forwards;}.SmartBalloonOff{  pointer-events: none;  -webkit-animation: SmartBalloonFadeOut .15s ease-in forwards;  -moz-animation: SmartBalloonFadeOut .15s ease-in forwards;  animation: SmartBalloonFadeOut .15s ease-in forwards;}@keyframes SmartBalloonFadeIn{    0%    {    z-Index: -1;    opacity: 0;    pointer-events: none;    }    100%    {    pointer-events: all !important;    opacity: 1;    }}@-moz-keyframes SmartBalloonFadeIn{    0%    {    z-Index: -1;    opacity: 0;    pointer-events: none;    }    100%    {    pointer-events: all;    opacity: 1;    }}@-webkit-keyframes SmartBalloonFadeIn{    0%    {    z-Index: -1;    opacity: 0;    pointer-events: none;    }    100%    {    pointer-events: all;    opacity: 1;    }}@keyframes SmartBalloonFadeOut{    0%    {    opacity: 1;    pointer-events: none !important;    }    99%    {    opacity: 0;    pointer-events: none !important;    }    100%    {    opacity: 0;    z-Index: -1;    pointer-events: none;    }}@-moz-keyframes SmartBalloonFadeOut{    0%    {    opacity: 1;    pointer-events: none;    }    99%    {    opacity: 0;    pointer-events: none;    }    100%    {    opacity: 0;    z-Index: -1;    pointer-events: none;    }}@-webkit-keyframes SmartBalloonFadeOut{    0%    {    opacity: 1;    pointer-events: none;    }    99%    {    opacity: 0;    pointer-events: none;    }    100%    {    opacity: 0;    z-Index: -1;    pointer-events: none;    }}.SmartBalloonContents\n{\n    border-color: var(--color-light-grey, #C9C9C9);\n    background: var(--color-full-light, #ffffff);\n    box-shadow: 1px 1px 9px 0px rgba(0, 0, 0, 0.1);\n    -webkit-box-shadow: 1px 1px 9px 0px rgba(0, 0, 0, 0.1);\n    text-align: left;\n    font-family: sans-serif;\n}\n\n.SmartBalloonTip\n{\n    border-bottom-color: var(--color-light-grey, #C9C9C9);\n}\n\n.SmartBalloonTipInner\n{\n   border-bottom-color: var(--color-full-light, #ffffff);\n}\n\n@media (prefers-color-scheme: dark)\n{\n    .SmartBalloonContents\n    {\n        background: var(--color-primary-light, #1F1F1F);\n        border-color: var(--color-primary-dark, #B3B3B3);\n    }\n\n    .SmartBalloonTip\n    {\n        border-bottom-color: var(--color-primary-dark, #B3B3B3);\n    }\n\n    .SmartBalloonTipInner\n    {\n       border-bottom-color: var(--color-primary-light,  #1F1F1F);\n    }\n}\n\nhtml.Dark .SmartBalloonContents\n{\n    background: var(--color-primary-light,  #1F1F1F);\n    border-color: var(--color-primary-dark,  #B3B3B3);\n}\n\nhtml.Dark .SmartBalloonTip\n{\n    border-bottom-color: var(--color-primary-dark,  #B3B3B3);\n}\n\nhtml.Dark .SmartBalloonTipInner\n{\n    border-bottom-color: var(--color-primary-light,  #1F1F1F);\n}\n\n.SmartBalloon.Error .SmartBalloonContents\n{\n    background: var(--color-bad, #800000);\n}\n\n.SmartBalloon.Error .SmartBalloonTipInner\n{\n   border-bottom-color: var(--color-bad, #800000);\n}\n\n.SmartBalloon.Error .SmartBalloonContents\n{\n   color: rgba(255, 255, 255, 0.85);\n   font-size: 12.5px;\n   padding-left: 16px;\n}\n\n.SmartBalloon.Error .SmartBalloonContents:before\n{\n  content: '⚠';\n  display: inline-block;\n  position: relative;\n  color: rgba(255, 255, 255, 0.75);\n  transform: translateX(-5px);\n}\n"})(SmartBalloonControl=SmartBalloonControl||{})})(Ux.SmartBalloon||(Ux.SmartBalloon={})),Accelatrix.Ux.Version="1.0.0",null==self.Accelatrix.Collections&&(console.warn("Accelatrix was not detected.\nAttempting to add from the Internet.\nConsider adding the Accelatrix base package to your project."),(Ux=document.createElement("script")).setAttribute("src","https://ferreira-family.org/accelatrix/accelatrix.min.js"),Ux.PrependTo(document.head))})(Accelatrix.Ux||(Accelatrix.Ux={}))})(Accelatrix=Accelatrix||{});
var Accelatrix,__extends=this&&this.__extends||(()=>{var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(d,b){d.__proto__=b}:function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])}))(d,b)};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}})();(Accelatrix=>{(StateManagement=>{(TreeNotificationDirection=>{TreeNotificationDirection.Bubble="Bubble",TreeNotificationDirection.Sink="Sink"})(TreeNotificationDirection=StateManagement.TreeNotificationDirection||(StateManagement.TreeNotificationDirection={}));var TreeNotificationDirection,PropertyState,TreeNotification=(()=>{function TreeNotification(issuer,direction){if(null==issuer)throw new self.Accelatrix.ArgumentNullException("issue cannot be null","issuer");if(null==direction)throw new self.Accelatrix.ArgumentNullException("direction cannot be null","direction");this.stack=new Array,this.sourceNode=issuer,this.initialDirection=direction,this.propagationDirection=direction}return Object.defineProperty(TreeNotification.prototype,"SourceNode",{get:function(){return this.sourceNode},enumerable:!1,configurable:!0}),Object.defineProperty(TreeNotification.prototype,"Stack",{get:function(){return this.stack},enumerable:!1,configurable:!0}),Object.defineProperty(TreeNotification.prototype,"PropagationDirection",{get:function(){return this.propagationDirection},enumerable:!1,configurable:!0}),Object.defineProperty(TreeNotification.prototype,"InitialDirection",{get:function(){return this.initialDirection},set:function(value){this.initialDirection=value},enumerable:!1,configurable:!0}),TreeNotification.prototype.BounceDirection=function(){this.propagationDirection=this.propagationDirection===TreeNotificationDirection.Bubble?TreeNotificationDirection.Sink:TreeNotificationDirection.Bubble},TreeNotification})(),RefreshDataNotification=(_super=>{function RefreshDataNotification(issuer,direction,dirtyProperties){issuer=_super.call(this,issuer,direction)||this;return issuer.dirtyProperties=dirtyProperties,issuer}return __extends(RefreshDataNotification,_super),Object.defineProperty(RefreshDataNotification.prototype,"DirtyProperties",{get:function(){return this.dirtyProperties},enumerable:!1,configurable:!0}),RefreshDataNotification})(TreeNotification),GenericNotification=(_super=>{function GenericNotification(issuer,direction,message){issuer=_super.call(this,issuer,direction)||this;return issuer.message=message,issuer}return __extends(GenericNotification,_super),Object.defineProperty(GenericNotification.prototype,"Message",{get:function(){return this.message},enumerable:!1,configurable:!0}),GenericNotification})(TreeNotification),PropertyChangedNotification=(_super=>{function PropertyChangedNotification(issuer,direction,propertyName,oldValue,newValue){var _this=this;if(null==propertyName||0==propertyName.trim().length)throw new Error("propertyName cannot be null");return(_this=_super.call(this,issuer,direction)||this).propertyName=propertyName,_this.oldValue=oldValue,_this.newValue=newValue,_this}return __extends(PropertyChangedNotification,_super),Object.defineProperty(PropertyChangedNotification.prototype,"PropertyName",{get:function(){return this.propertyName},enumerable:!1,configurable:!0}),Object.defineProperty(PropertyChangedNotification.prototype,"OldValue",{get:function(){return this.oldValue},enumerable:!1,configurable:!0}),Object.defineProperty(PropertyChangedNotification.prototype,"NewValue",{get:function(){return this.newValue},enumerable:!1,configurable:!0}),PropertyChangedNotification})(TreeNotification);(PropertyState=>{PropertyState[PropertyState.UpToDate=0]="UpToDate",PropertyState[PropertyState.Dirty=1]="Dirty"})(PropertyState=PropertyState||{}),TreeNotification=(_super=>{function NotificationTreeNode(){var _this=_super.call(this)||this;return _this.Children=new Array,_this}return __extends(NotificationTreeNode,_super),Object.defineProperty(NotificationTreeNode.prototype,"Root",{get:function(){return 0===this.Observers.length?this:(null==this.rootNode&&(this.rootNode=Object.FlattenHierarchy(this,function(z){return z.Observers}).Where(function(z){return 0==z.Observers.length}).FirstOrNull()),this.rootNode)},enumerable:!1,configurable:!0}),NotificationTreeNode.prototype.ValidateSubscription=function(nodeThatWantsToObserveMe){if(!_super.prototype.ValidateSubscription.call(this,nodeThatWantsToObserveMe))throw new Error("Cannot add node.");if(this.IsCircular(nodeThatWantsToObserveMe))throw new Error("Do not support circular hierarchies.");return!0},NotificationTreeNode.prototype.IsCircular=function(node){return this.ParentsHierarchy(node).Contains(this)},NotificationTreeNode.prototype.ParentsHierarchy=function(node){var _this=this;return node.Observers.SelectMany(function(z){return[z].Concat(_this.ParentsHierarchy(z))})},NotificationTreeNode.NodeFactory=function(type){return new type},NotificationTreeNode.prototype.NodeFactory=function(type){return NotificationTreeNode.NodeFactory(type)},NotificationTreeNode.prototype.PrepareAndRetrieveChild=function(type){if(null==type)throw new self.Accelatrix.ArgumentNullException("Child node type cannot be null","type");var newNode,existing=this.Children.Where(function(z){return z.Type===type}).FirstOrNull();return null==existing&&(newNode=this.NodeFactory(type),this.Children.push(existing={Type:type,Node:newNode}),this.OnAddingNode(newNode),this.Subscribe(newNode),newNode.Initialize(),this.OnAddedNode(newNode)),existing.Node},NotificationTreeNode.prototype.Initialize=function(){},NotificationTreeNode.prototype.OnAddingNode=function(node){},NotificationTreeNode.prototype.OnAddedNode=function(node){},NotificationTreeNode.prototype.AscensionPath=function(notification){var _this=this;return notification.Stack.reverse().TakeWhile(function(z){return!z.Equals(_this.Root)})},NotificationTreeNode.prototype.HasPassedByNode=function(notification,node){return this.AscensionPath(notification).Contains(node)},NotificationTreeNode})((()=>{function NotificationTreeNodeBase(){this.observers=new Array,this.observees=new Array,this.PropertyBag={},this.EventListeners=[{Event:NotificationTreeNodeBase.RECEIVED,Listeners:new Array},{Event:NotificationTreeNodeBase.SENT,Listeners:new Array},{Event:NotificationTreeNodeBase.SENDING,Listeners:new Array}]}return Object.defineProperty(NotificationTreeNodeBase.prototype,"Observers",{get:function(){return this.observers},enumerable:!1,configurable:!0}),Object.defineProperty(NotificationTreeNodeBase.prototype,"Observees",{get:function(){return this.observees},enumerable:!1,configurable:!0}),Object.defineProperty(NotificationTreeNodeBase.prototype,"State",{get:function(){var _this=this;return Object.keys(this.PropertyBag).Select(function(z){return _this.PropertyBag[z].State}).Contains(PropertyState.Dirty)?PropertyState.Dirty:PropertyState.UpToDate},enumerable:!1,configurable:!0}),Object.defineProperty(NotificationTreeNodeBase.prototype,"IsRoot",{get:function(){return null==this.Observers||!this.Observers.Where(function(z){return null!=z}).Any()},enumerable:!1,configurable:!0}),Object.defineProperty(NotificationTreeNodeBase.prototype,"HasChildren",{get:function(){return null!=this.Observees&&this.Observees.Where(function(z){return null!=z}).Any()},enumerable:!1,configurable:!0}),NotificationTreeNodeBase.prototype.OnNotificationReceived=function(handler,remove){null!=remove&&remove?this.RemoveEventListener(NotificationTreeNodeBase.RECEIVED,handler):this.AddEventListener(NotificationTreeNodeBase.RECEIVED,handler)},NotificationTreeNodeBase.PropertyChangedHandler=function(propertyName,notification,handler){null!=propertyName&&null!=notification&&null!=handler&&null!=notification.PropertyName&&(notification=notification,"String"===propertyName.GetType().Name?notification.PropertyName===propertyName&&handler(notification):propertyName.Contains(notification.PropertyName)&&handler(notification))},NotificationTreeNodeBase.prototype.OnPropertyChangedReceived=function(propertyName,handler,remove){null!=remove&&remove?this.RemoveEventListener(NotificationTreeNodeBase.RECEIVED,function(z){return NotificationTreeNodeBase.PropertyChangedHandler(propertyName,z,handler)}):this.AddEventListener(NotificationTreeNodeBase.RECEIVED,function(z){return NotificationTreeNodeBase.PropertyChangedHandler(propertyName,z,handler)})},NotificationTreeNodeBase.prototype.OnSendingPropertyChanged=function(propertyName,handler,remove){null!=remove&&remove?this.RemoveEventListener(NotificationTreeNodeBase.SENDING,function(z){return NotificationTreeNodeBase.PropertyChangedHandler(propertyName,z,handler)}):this.AddEventListener(NotificationTreeNodeBase.SENDING,function(z){return NotificationTreeNodeBase.PropertyChangedHandler(propertyName,z,handler)})},NotificationTreeNodeBase.prototype.OnNotificationSent=function(handler,remove){null!=remove&&remove?this.RemoveEventListener(NotificationTreeNodeBase.SENT,handler):this.AddEventListener(NotificationTreeNodeBase.SENT,handler)},NotificationTreeNodeBase.prototype.OnSendingNotification=function(handler,remove){null!=remove&&remove?this.RemoveEventListener(NotificationTreeNodeBase.SENDING,handler):this.AddEventListener(NotificationTreeNodeBase.SENDING,handler)},NotificationTreeNodeBase.prototype.AddEventListener=function(event,handler){null!=handler&&this.EventListeners.Where(function(z){return z.Event===event}).Select(function(z){return z.Listeners}).Take(1).ForEach(function(z){return z.push(handler)})},NotificationTreeNodeBase.prototype.RemoveEventListener=function(event,handler){null!=handler&&this.EventListeners.Where(function(z){return z.Event===event}).Select(function(z){return{Handlers:z.Listeners,What:z.Listeners.Select(function(w,i){return{Handler:w,Index:i}}).Where(function(w){return w.Handler===handler}).Select(function(w){return w.Index}).FirstOrNull()}}).Where(function(z){return null!=z.What}).ToList().ForEach(function(z){return z.Handlers.splice(z.What,1)})},NotificationTreeNodeBase.prototype.FireEvent=function(event,notification){var _this=this;this.EventListeners.Where(function(z){return z.Event===event}).SelectMany(function(z){return z.Listeners}).ToList().ForEach(function(z){return z.bind(_this)(notification)})},NotificationTreeNodeBase.prototype.Subscribe=function(node){null==node||node.Observees.Contains(this)||this.ValidateSubscription(node)&&(this.Observees.push(node),node.Observers.push(this))},NotificationTreeNodeBase.prototype.ValidateSubscription=function(nodeThatWantsToObserveMe){return!this.Observers.Contains(nodeThatWantsToObserveMe)},NotificationTreeNodeBase.prototype.Receive=function(notification){this.FireEvent(NotificationTreeNodeBase.RECEIVED,notification),this.RelayNotification(notification)},NotificationTreeNodeBase.prototype.RelayNotification=function(notification){var me,cloneNotification,hasBounced,passCount;null==notification||(passCount=0,passCount=notification.Stack.Concat([me=this]).Where(function(z){return z==me}).ToList().length,notification.Stack.push(this),2<passCount)||((passCount=[notification].Where(function(z){return z.SourceNode==me}).Where(function(z){return 1==z.Stack.length}).Where(function(z){return z.InitialDirection==TreeNotificationDirection.Sink}).OfType(PropertyChangedNotification).Select(function(z){return{Old:z.OldValue,New:z.NewValue}}).Where(function(z){return null!=z.Old}).SelectMany(function(z){return z.Old.Except(z.New)}).Select(function(z){return z}).ToList()).Any()&&(cloneNotification=new PropertyChangedNotification(notification.SourceNode,notification.PropagationDirection,notification.PropertyName,notification.OldValue,notification.NewValue),passCount.ForEach(function(z){return z.Receive(cloneNotification)})),notification.SourceNode,passCount=me.IsRoot||!me.HasChildren,hasBounced=notification.InitialDirection!=notification.PropagationDirection,!!passCount&&hasBounced?notification.PropagationDirection==TreeNotificationDirection.Sink&&notification.Stack.Where(function(z){return z==me}).Any()&&notification.SourceNode!=me||me.FireEvent(NotificationTreeNodeBase.RECEIVED,notification):(!hasBounced&&passCount&&(me.IsRoot&&notification.PropagationDirection==TreeNotificationDirection.Bubble||!this.IsRoot&&notification.PropagationDirection==TreeNotificationDirection.Sink)&&notification.BounceDirection(),notification.PropagationDirection===TreeNotificationDirection.Sink?this.RelayDownwards(notification):this.RelayUpwards(notification)))},NotificationTreeNodeBase.prototype.RelayUpwards=function(notification){this.Observers.ToList().ForEach(function(z){return z.Receive(notification)})},NotificationTreeNodeBase.prototype.RelayDownwards=function(notification){this.Observees.ToList().ForEach(function(z){return z.Receive(notification)})},NotificationTreeNodeBase.prototype.InitialNotificationDirection=function(){return TreeNotificationDirection.Bubble},NotificationTreeNodeBase.prototype.ExecuteAsync=function(action){setTimeout(action,0)},NotificationTreeNodeBase.prototype.IssueNotification=function(notification){var me;null!=notification&&(notification.PropagationDirection!==this.InitialNotificationDirection()&&notification.BounceDirection(),notification.InitialDirection=notification.PropagationDirection,(me=this).FireEvent(NotificationTreeNodeBase.SENDING,notification),this.ExecuteAsync(function(){me.RelayNotification(notification),me.FireEvent(NotificationTreeNodeBase.SENT,notification)}))},NotificationTreeNodeBase.prototype.IssueRefreshDataNotification=function(dirtyProperties){this.IssueNotification(new RefreshDataNotification(this,this.InitialNotificationDirection(),dirtyProperties))},NotificationTreeNodeBase.prototype.IssueGenericNotification=function(message){this.IssueNotification(new GenericNotification(this,this.InitialNotificationDirection(),message))},NotificationTreeNodeBase.prototype.IssuePropertyChanged=function(propertyName,oldValue,newValue){this.IssueNotification(new PropertyChangedNotification(this,this.InitialNotificationDirection(),propertyName,oldValue,newValue))},NotificationTreeNodeBase.prototype.GetProperty=function(propertyName){return this.CheckForNeedToRefresh(propertyName),Object.keys(this.PropertyBag).Contains(propertyName)?this.PropertyBag[propertyName].Value:null},NotificationTreeNodeBase.prototype.SetProperty=function(propertyName,value,state){this.DoSetProperty(propertyName,value,!1,state)},NotificationTreeNodeBase.prototype.DoSetProperty=function(propertyName,value,silent,state){var oldValue=Object.keys(this.PropertyBag).Contains(propertyName)?this.PropertyBag[propertyName].Value:"$null_n0_Data$";null==state&&(state=PropertyState.UpToDate),this.PropertyBag[propertyName]={Value:value,State:state},null===value&&null===oldValue||state===PropertyState.Dirty||(null!==value&&null===oldValue||null===value&&null!==oldValue||null!=value&&!value.Equals(oldValue)||null!=oldValue&&!oldValue.Equals(value))&&(this.IssuePropertyChanged(propertyName,"$null_n0_Data$"===oldValue?null:oldValue,value),null!=silent&&silent||this.RefreshView([propertyName]))},NotificationTreeNodeBase.prototype.CheckForNeedToRefresh=function(propertyName){var dirtyProperties_1,_this=this,notUpToDate=(Object.keys(this.PropertyBag).Where(function(z){return z===propertyName}).Any()||this.SetProperty(propertyName,null,PropertyState.Dirty),Object.keys(this.PropertyBag).Select(function(z){return{PropertyName:z,Value:_this.PropertyBag[z]}}).Where(function(z){return"DataLoaderException"!==z.PropertyName}).Where(function(z){return z.Value.State!==PropertyState.UpToDate}).ToList()),current=notUpToDate.Where(function(z){return z.PropertyName===propertyName}).FirstOrNull();null!=current&&(current.Value.State=PropertyState.UpToDate,notUpToDate.Any())&&(dirtyProperties_1={},notUpToDate.ForEach(function(z){return dirtyProperties_1[z.PropertyName]=z.Value.Value}),this.ExecuteAsync(function(){return _this.RefreshData(dirtyProperties_1)}))},NotificationTreeNodeBase.prototype.SetProperties=function(properties,state){var dirtyProperties,_this=this;null!=properties&&(dirtyProperties=new Array,Object.keys(properties).ForEach(function(z){var oldValue=null==_this.PropertyBag[z]?null:_this.PropertyBag[z].Value,value=properties[z];(null!==value&&null===oldValue||null===value&&null!==oldValue||null!=value&&!value.Equals(oldValue))&&dirtyProperties.push(z),_this.DoSetProperty(z,value,!0,state)}),dirtyProperties.Any())&&this.RefreshView(dirtyProperties)},NotificationTreeNodeBase.RECEIVED="Received",NotificationTreeNodeBase.SENT="Sent",NotificationTreeNodeBase.SENDING="Sending",NotificationTreeNodeBase})()),StateManagement.NotificationTreeNode=TreeNotification})(Accelatrix.StateManagement||(Accelatrix.StateManagement={}))})(Accelatrix=Accelatrix||{});